<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Renderer.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Renderer.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { config } from '../config';

/**
 * Entity Renderer
 */
export class Renderer
{
  /**
   * Render the entity
   * @param {*} context 
   * @param {*} entity 
   */
  static render (entity, context) {
    if (entity.sleep) {
      return;
    }

    if (entity.type === 'pickup') {
      context.shadowBlur = entity.glow;
      context.shadowColor = entity.color;

      const size = config.cell.size / 2;

      if (entity.image.complete) {
        context.drawImage(entity.image, entity.x, entity.y, size, size);
      } else {
        entity.image.onload = () => context.drawImage(entity.image, entity.x, entity.y, size, size);
      }
    } else {
      Renderer.beginRotationOffset(context, entity.x, entity.y, entity.angle);

      if (! entity.dead) {
        entity.type === 'enemy'
          ? Renderer.enemy(context, entity.position)
          : Renderer.player(context, entity.position);
      } else {
        entity.type === 'enemy'
          ? Renderer.deadEnemy(context)
          : Renderer.deadPlayer(context);
      }
      
      Renderer.endRotationOffset(context, entity.x, entity.y, entity.angle);
      Renderer.health(context, entity.health, entity.x, entity.y);
    }
  }

  /**
   * Calculate offset and begin rotating entity to given angle at position
   * @param {*} context 
   * @param {*} x 
   * @param {*} y 
   * @param {*} angle 
   */
  static beginRotationOffset (context, x, y, angle) {
    context.translate(-(-x + context.canvas.width / 2), -(-y + context.canvas.height / 2));
    context.translate(context.canvas.width / 2, context.canvas.height / 2);
  
    context.rotate(angle);
  }
  
  /**
     * Stop rotating entity to given angle at position
     * @param {*} context 
     * @param {*} x 
     * @param {*} y 
     * @param {*} angle 
     */
  static endRotationOffset (context, x, y, angle) {
    context.rotate(-angle);
  
    context.translate(-context.canvas.width / 2, -context.canvas.height / 2);
    context.translate(+(-x + context.canvas.width / 2), +(-y + context.canvas.height / 2));
  }

  /**
   * Draw player
   * @param {*} context 
   * @param {*} position 
   */
  static player (context, position) {
    context.shadowBlur = 5;
    context.shadowColor = 'white';

    // left foot
    context.beginPath();
    context.rect(20, -20 + (position * 35), 25, 40);
    context.fillStyle = '#D95B43';
    context.fill();

    // right foot
    context.beginPath();
    context.rect(-40, -20 + (position * -35), 25, 40);
    context.fillStyle = '#D95B43';
    context.fill();

    // left hand
    context.rotate(30 * Math.PI / 180);
    context.beginPath();
    context.rect(40, -10, 20, 80);
    context.fillStyle = '#C02942';
    context.fill();
    context.rotate(-30 * Math.PI / 180);

    // right hand
    context.rotate(-50 * Math.PI / 180);
    context.beginPath();
    context.rect(-55, -20, 20, 45);
    context.fillStyle = '#C02942';
    context.fill();
    context.rotate(50 * Math.PI / 180);

    // torso
    context.beginPath();
    context.rect(-60, - 30, 120, 60);
    context.fillStyle = '#53777A';
    context.fill();

    // gun
    context.beginPath();
    context.rect(-12.5, 30, 25, 70);
    context.fillStyle = 'gray';
    context.fill();

    // head
    context.beginPath();
    context.arc(0, 0, 40, 0, 2 * Math.PI);
    context.fillStyle = '#F1D4AF';
    context.fill();

    // hair
    context.rotate(-180 * Math.PI / 180);
    context.beginPath();
    context.arc(0, 0, 50, 0, 180 * Math.PI / 180);
    context.fillStyle = '#454B1B';
    context.fill();
    context.rotate(180 * Math.PI / 180);
  }

  /**
   * Draw dead player
   * @param {*} context 
   */
  static deadPlayer (context) {
    // left foot
    context.beginPath();
    context.rect(30, 20, 25, 40);
    context.fillStyle = '#D95B43';
    context.fill();

    // right foot
    context.beginPath();
    context.rect(-25, -30 -35, 25, 40);
    context.fillStyle = '#D95B43';
    context.fill();

    // left hand
    context.rotate(25 * Math.PI / 180);
    context.beginPath();
    context.rect(40, -5, 20, 80);
    context.fillStyle = '#C02942';
    context.fill();
    context.rotate(-25 * Math.PI / 180);

    // right hand
    context.rotate(-60 * Math.PI / 180);
    context.beginPath();
    context.rect(-40, 20, 20, 45);
    context.fillStyle = '#C02942';
    context.fill();
    context.rotate(60 * Math.PI / 180);

    // torso
    context.beginPath();
    context.rect(-60, - 30, 120, 60);
    context.fillStyle = '#53777A';
    context.fill();

    // gun
    // context.beginPath();
    // context.rect(-12.5, 40, 25, 70);
    // context.fillStyle = 'gray';
    // context.fill();

    // head
    context.beginPath();
    context.arc(20, 10, 35, 0, 2 * Math.PI);
    context.fillStyle = '#F1D4AF';
    context.fill();

    // hair
    context.rotate(-170 * Math.PI / 180);
    context.beginPath();
    context.arc(0, 0, 32, 0, 180 * Math.PI / 180);
    context.fillStyle = '#4d2600';
    context.fill();
    context.rotate(170 * Math.PI / 180);
  }

  /**
   * Draw enemy
   * @param {*} context 
   * @param {*} position 
   */
  static enemy (context, position) {
    context.shadowBlur = 10;
    context.shadowColor = '#8fce00';
    
    // left foot
    context.beginPath();
    context.rect(20, -20 + (position * 35), 25, 40);
    context.fillStyle = '#79BD9A';
    context.fill();

    // right foot
    context.beginPath();
    context.rect(-40, -20 + (position * -35), 25, 40);
    context.fillStyle = '#79BD9A';
    context.fill();

    // left hand
    context.beginPath();
    context.rect(-50, -10, 20, 90);
    context.fillStyle = '#3B8686';
    context.fill();

    // right hand
    context.beginPath();
    context.rect(30, -10, 20, 85);
    context.fillStyle = '#3B8686';
    context.fill();

    // torso
    context.beginPath();
    context.rect(-60, - 30, 120, 60);
    context.fillStyle = '#0B486B';
    context.fill();

    // head
    context.beginPath();
    context.arc(0, 0, 40, 0, 2 * Math.PI);
    context.fillStyle = '#CFF09E';
    context.fill();

    // hair
    context.rotate(-180 * Math.PI / 180);
    context.beginPath();
    context.arc(0, 0, 37, 0, 180 * Math.PI / 180);
    context.fillStyle = '#880808';
    context.fill();
    context.rotate(180 * Math.PI / 180);
  }

  /**
   * Draw dead enemy
   * @param {*} context 
   */
  static deadEnemy (context) {
    // left foot
    context.beginPath();
    context.rect(52, -30, 25, 40);
    context.fillStyle = '#79BD9A';
    context.fill();

    // right foot
    context.beginPath();
    context.rect(26, -40, 25, 40);
    context.fillStyle = '#79BD9A';
    context.fill();

    // left hand
    context.beginPath();
    context.rect(-25, 35, 20, 90);
    context.fillStyle = '#3B8686';
    context.fill();

    // right hand
    context.beginPath();
    context.rect(35, -40, 20, 85);
    context.fillStyle = '#3B8686';
    context.fill();

    // torso
    context.beginPath();
    context.rect(-42, -20, 120, 60);
    context.fillStyle = '#0B486B';
    context.fill();

    // head
    context.beginPath();
    context.arc(10, 5, 35, 0, 2 * Math.PI);
    context.fillStyle = '#CFF09E';
    context.fill();

    // hair
    context.rotate(-170 * Math.PI / 180);
    context.beginPath();
    context.arc(0, 0, 25, 0, 180 * Math.PI / 180);
    context.fillStyle = '#4d2600';
    context.fill();
    context.rotate(170 * Math.PI / 180);
  }

  /**
   * Draw health
   * @param {*} context 
   * @param {*} health 
   * @param {*} centerX 
   * @param {*} centerY 
   */
  static health (context, health, centerX, centerY) {
    context.beginPath();
    context.rect(centerX - 50, centerY + 60, 100, 5);
    context.strokeStyle = 'black';
    context.stroke();

    let color; 
    if (health &lt;= 35) {
      color = 'red';
    } else if (health &lt;= 75) {
      color = 'orange';
    } else {
      color = '#50ffb0';
    }

    context.beginPath();
    context.rect(centerX - 50, centerY + 60, health, 5);
    context.fillStyle = color;
    context.fill();
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Ammo.html">Ammo</a></li><li><a href="Ballistics.html">Ballistics</a></li><li><a href="Bullet.html">Bullet</a></li><li><a href="Camera.html">Camera</a></li><li><a href="Enemy.html">Enemy</a></li><li><a href="Grenade.html">Grenade</a></li><li><a href="Health.html">Health</a></li><li><a href="Map.html">Map</a></li><li><a href="Player.html">Player</a></li><li><a href="Renderer.html">Renderer</a></li><li><a href="Stamina.html">Stamina</a></li><li><a href="Wall.html">Wall</a></li><li><a href="-_AudioFX.html">_AudioFX</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AudioFX">AudioFX</a></li><li><a href="global.html#Level7">Level7</a></li><li><a href="global.html#level0">level0</a></li><li><a href="global.html#level1">level1</a></li><li><a href="global.html#level2">level2</a></li><li><a href="global.html#level3">level3</a></li><li><a href="global.html#level4">level4</a></li><li><a href="global.html#level5">level5</a></li><li><a href="global.html#level6">level6</a></li><li><a href="global.html#weapons">weapons</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Nov 03 2023 13:40:18 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
