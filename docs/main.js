(()=>{var e={909:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(81),s=i.n(n),a=i(645),o=i.n(a)()(s());o.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=VT323&display=swap);"]),o.push([e.id,"/***************************|\n | Defaults                 |\n ***************************/\nhtml, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background: black;\n  font-family: 'VT323', monospace;\n}\n\ncanvas {\n  cursor: crosshair;\n}\n\n#current-level {\n  color: #50ffb0;\n}\n\n#equipped-weapon {\n  color: #27a2f5;\n}\n\n#enemies-remaining {\n  color: #ff4040;\n}\n\n#soundtrack-volume {\n  background: linear-gradient(to right, #50ffb0 0%, #50ffb0 50%, #fff 50%, #fff 100%);\n  border: solid 1px #50ffb0;\n  border-radius: 8px;\n  height: 7px;\n  outline: none;\n  transition: background 450ms ease-in;\n  appearance: none;\n  -webkit-appearance: none;\n}\n\n/***************************|\n | Splash screen            |\n ***************************/\n.body-splash {\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  background-color: #fff;\n  background-image: url(\"./img/splash.webp\");\n  /* background-position: center; */\n  background-position-x: 0px;\n  background-position-y: 0px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  position: relative;\n}\n\n.splash {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  background: rgba(0,0,0,0.8);\n  display:flex;\n  align-items: center;\n}\n\n.splash__text {\n  width: 100%;\n  margin: auto;\n  position: absolute;\n  text-align: center;\n}\n\n.splash__heading {\n  margin: 0px auto;\n  font-size: 12rem;\n  text-transform: uppercase;\n  font-weight: bold;\n  text-shadow: 0 0 100px rgb(240 241 241 / 74%);\n  background: -webkit-linear-gradient(#09CF8D, #222222);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  animation: splash 80s linear infinite;\n  transform: translate3d(0, 0, 0);\n  backface-visibility: hidden;\n  -webkit-animation: splash 80s linear infinite;\n  -webkit-transform: translate3d(0, 0, 0);\n  -webkit-backface-visibility: hidden;\n}\n\n@keyframes splash {\n  0% { background-position: 0% 50%; }\n  100% {background-position: 100% 50%; }\n}\n@-webkit-keyframes splash {\n  0% { background-position: 0% 50%; }\n  100% {background-position: 100% 50%; }\n}\n\n.splash__button {\n  display: block;\n  margin: 0 auto;\n  height: 70pt;\n  width: calc(30pt * 10);\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  user-select: none;\n  background: transparent;\n  image-rendering: pixelated;\n  border: 0;\n}\n\n.splash__button__text {\n  font-family: 'VT323', monospace;\n  font-size: 4rem;\n  width: 100%;\n  height: 100%;\n  padding-bottom: 0.3em;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #eeeeee;\n  text-shadow: 0 0 15px #50ffb0;\n}\n\n.splash__button:hover .splash__button__text {\n  color: #f5d95c;\n  text-shadow: 0 0 30px #50ffb0;\n}\n\n\n/***************************|\n | Help and controls        |\n ***************************/\n.help-section {\n  position: absolute;\n  top: 30px;\n  left: 20px;\n  width: 300px;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  font-size: 1.2rem;\n  color: white;\n  background: rgba(34, 34, 34, 0.7);\n  box-shadow: 0 0 15px #50ffb0;\n  border: 1px solid #50ffb0;\n  border-radius: 5px;\n  padding: 15px;\n}\n\n.help-section__title {\n  margin-top: 0;\n  margin-bottom: 10px;\n}\n\n.help-section__separator {\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\n.help-block {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.help-block--wrap {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 15px;\n  font-size:.75rem;\n}\n\n.help-block__img {\n  width: 40px;\n  margin-right: 20px;\n}\n\n.help-block__text--muted {\n  font-size: 0.75rem;\n  color:#aaaaaa;\n}\n\n.help-block__hotkey {\n  padding: 5px 10px 5px 10px;\n  border: 1px solid white;\n  border-radius: 5px;\n  margin-right: 5px;\n  font-size: .75rem;\n}\n\n.help-block__hotkey--active {\n  background-color: #f5f5f5;\n  color: black;\n  box-shadow: 3px 3px #7e7e7d;\n}\n\n/***************************|\n | Game ended display       |\n ***************************/\n.game-ended {\n  display: none;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  text-align: center;\n}\n\n.game-ended__text {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 0;\n  height: 100%;\n  width: 100%;\n  color: white;\n}\n\n.game-ended__text--big {\n  font-size: 6rem;\n  text-transform: uppercase;\n}\n\n\n/***************************|\n | Out of ammo display      |\n ***************************/\n#out-of-ammo {\n  display: none;\n  border: none;\n  color: #be3e3e;\n  text-align: center;\n  text-shadow: 1px 5px 4px rgba(0, 0, 0, .3), 0 0 2px rgb(221, 145, 145), 0 0 10px;\n}\n\n#out-of-ammo span {\n  animation: blink .7s infinite alternate;\n}\n\n#out-of-ammo span.delay {\n  animation-duration: 6s;\n  animation-delay: 2s;\n  animation-direction: alternate cubic-bezier(0.5, 0.2, 0.3, 1.0)\n}\n\n@keyframes blink {\n  0% {}\n  50% {}\n  80% {\n    text-shadow: 0 0 2px rgba(255, 255, 255, .1), 0 0 10px rgba(255, 255, 255, .4);\n    text-stroke: 2px rgba(255, 255, 255, 0.05);\n  }\n}\n\n\n/***************************|\n | WSAD Map                 |\n ***************************/\n.keyboard {\n  width: 300px;\n  margin: 0 auto;\n}\n\n.keyboard__top-row {\n  width: 120px;\n  margin: 0 auto;\n}\n\n.keyboard__bottom-row {\n  display: inline-flex;\n}\n\n.keyboard__key {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #353943;\n  border: 1px solid #50ffb0;\n  box-shadow: 3px 3px #50ffb0;\n  border-radius: 5px;\n  color: #ffffff;\n  width: 60px;\n  margin: 15px;\n  text-align: center;\n  top: 0;\n  left: 0;\n  transition: all 0.07s ease;\n}\n\n.keyboard__key > p {\n  margin-top: 5px;\n  margin-bottom: 10px;\n}\n\n.keyboard__key--active {\n  background: #ffffff;\n  color: #000000;\n  box-shadow: 3px 3px #7e7e7d;\n}\n\n\n/***************************|\n | Stats UI                 |\n ***************************/\n.stats {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n}\n\n\n/***************************|\n | Utility classes          |\n ***************************/\n.overlay {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0,0,0,0.9);\n}\n\n.grow {\n  flex-grow: 1\n}\n\n.inactive {\n  display: none;\n}\n\n.fail {\n  background: rgba(197, 13, 13, 0.8);\n}\n\n.pass {\n  background: rgba(13, 197, 38, 0.712);\n}\n\n.mt-0 {\n  margin-top: 0;\n}\n\n.mb-0 {\n  margin-bottom: 0;\n}",""]);const r=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,n,s,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var r=0;r<this.length;r++){var l=this[r][0];null!=l&&(o[l]=!0)}for(var h=0;h<e.length;h++){var c=[].concat(e[h]);n&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),t.push(c))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},466:function(e){var t;e.exports=((t=function(){function e(e){return s.appendChild(e.dom),e}function i(e){for(var t=0;t<s.children.length;t++)s.children[t].style.display=t===e?"block":"none";n=e}var n=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",(function(e){e.preventDefault(),i(++n%s.children.length)}),!1);var a=(performance||Date).now(),o=a,r=0,l=e(new t.Panel("FPS","#0ff","#002")),h=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:s,addPanel:e,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){r++;var e=(performance||Date).now();if(h.update(e-a,200),e>o+1e3&&(l.update(1e3*r/(e-o),100),o=e,r=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:s,setMode:i}}).Panel=function(e,t,i){var n=1/0,s=0,a=Math.round,o=a(window.devicePixelRatio||1),r=80*o,l=48*o,h=3*o,c=2*o,p=3*o,d=15*o,W=74*o,u=30*o,m=document.createElement("canvas");m.width=r,m.height=l,m.style.cssText="width:80px;height:48px";var y=m.getContext("2d");return y.font="bold "+9*o+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=i,y.fillRect(0,0,r,l),y.fillStyle=t,y.fillText(e,h,c),y.fillRect(p,d,W,u),y.fillStyle=i,y.globalAlpha=.9,y.fillRect(p,d,W,u),{dom:m,update:function(l,f){n=Math.min(n,l),s=Math.max(s,l),y.fillStyle=i,y.globalAlpha=1,y.fillRect(0,0,r,d),y.fillStyle=t,y.fillText(a(l)+" "+e+" ("+a(n)+"-"+a(s)+")",h,c),y.drawImage(m,p+o,d,W-o,u,p,d,W-o,u),y.fillRect(p+W-o,d,o,u),y.fillStyle=i,y.globalAlpha=.9,y.fillRect(p+W-o,d,o,a((1-l/f)*u))}}},t)},379:e=>{"use strict";var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var a={},o=[],r=0;r<e.length;r++){var l=e[r],h=n.base?l[0]+n.base:l[0],c=a[h]||0,p="".concat(h," ").concat(c);a[h]=c+1;var d=i(p),W={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(W);else{var u=s(W,n);n.byIndex=r,t.splice(r,0,{identifier:p,updater:u,references:1})}o.push(p)}return o}function s(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,s){var a=n(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var r=i(a[o]);t[r].references--}for(var l=n(e,s),h=0;h<a.length;h++){var c=i(a[h]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=l}}},569:e=>{"use strict";var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var a=i.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={id:n,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0,(()=>{"use strict";const e=60,t=150,n=!1,s=25,a=7.5,o={up:!1,down:!1,left:!1,right:!1},r={x:0,y:0,pressed:!1},l={fx:{weapon:.5,snippet:.5},soundtrack:.5};class h{static intersection(e,t){return!(e.x+e.width<t.x||e.y+e.height<t.y||e.x>t.x+t.width||e.y>t.y+t.height)}static distance(e,t,i=!0){if(i)return Math.sqrt(e*e+t*t);const n=e.x-t.x,s=e.y-t.y;return Math.sqrt(n*n+s*s)}static arcWallVector({arcX:e,arcY:t,radius:i,wallX:n,wallY:s,size:a}){const o=Math.abs(e-n-a/2),r=Math.abs(t-s-a/2);if(o>a/2+i)return!1;if(r>a/2+i)return!1;if(o<=a/2)return!0;if(r<=a/2)return!0;const l=o-a/2,h=r-a/2;return l*l+h*h<=i*i}static entityToWalls(e,i){const n={x:0,y:0};for(let s=0;s<i.length;s++){const a=i[s];if(h.arcWallVector({arcX:e.x,arcY:e.y,radius:60,wallX:a.x,wallY:a.y,size:t})){const i=a.x+t/2,s=a.y+t/2;let o=e.x-i,r=e.y-s;const l=h.distance(o,r);l>0&&(o/=l,r/=l,n.x+=o,n.y+=r)}}return n}static entityToPlayer(e,t,i){let n=t.player.x-e.x,s=t.player.y-e.y;t.player.dead?(n=e.lastVectorX,s=e.lastVectorY):(e.lastVectorX=n,e.lastVectorY=s);const a=h.distance(n,s);if("pickup"===e.type&&i&&a<=95&&i(),a>0&&"enemy"===e.type&&(n/=a,s/=a,a<800)){e.angle=Math.atan2(s,n)-90*Math.PI/180,e.x+=n*e.speed,e.y+=s*e.speed;const i=h.entityToWalls(e,t.walls);e.x+=i.x*e.speed,e.y+=i.y*e.speed,e.incrementer+=e.speed,e.position=Math.sin(e.incrementer*Math.PI/180),a<100&&"enemy"===e.type&&t.player.takeDamage(e)}}}class c{static render(e,i){if(!e.sleep)if("pickup"===e.type){i.shadowBlur=e.glow,i.shadowColor=e.color;const n=t/2;e.image.complete?i.drawImage(e.image,e.x,e.y,n,n):e.image.onload=()=>i.drawImage(e.image,e.x,e.y,n,n)}else c.beginRotationOffset(i,e.x,e.y,e.angle),e.dead?"enemy"===e.type?c.deadEnemy(i):c.deadPlayer(i):"enemy"===e.type?c.enemy(i,e.position):c.player(i,e.position),c.endRotationOffset(i,e.x,e.y,e.angle),c.health(i,e.health,e.x,e.y)}static beginRotationOffset(e,t,i,n){e.translate(-(-t+e.canvas.width/2),-(-i+e.canvas.height/2)),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(n)}static endRotationOffset(e,t,i,n){e.rotate(-n),e.translate(-e.canvas.width/2,-e.canvas.height/2),e.translate(+(-t+e.canvas.width/2),+(-i+e.canvas.height/2))}static player(e,t){e.shadowBlur=5,e.shadowColor="white",e.beginPath(),e.rect(20,35*t-20,25,40),e.fillStyle="#D95B43",e.fill(),e.beginPath(),e.rect(-40,-35*t-20,25,40),e.fillStyle="#D95B43",e.fill(),e.rotate(30*Math.PI/180),e.beginPath(),e.rect(40,-10,20,80),e.fillStyle="#C02942",e.fill(),e.rotate(-30*Math.PI/180),e.rotate(-50*Math.PI/180),e.beginPath(),e.rect(-55,-20,20,45),e.fillStyle="#C02942",e.fill(),e.rotate(50*Math.PI/180),e.beginPath(),e.rect(-60,-30,120,60),e.fillStyle="#53777A",e.fill(),e.beginPath(),e.rect(-12.5,30,25,70),e.fillStyle="gray",e.fill(),e.beginPath(),e.arc(0,0,40,0,2*Math.PI),e.fillStyle="#F1D4AF",e.fill(),e.rotate(-180*Math.PI/180),e.beginPath(),e.arc(0,0,50,0,180*Math.PI/180),e.fillStyle="#454B1B",e.fill(),e.rotate(180*Math.PI/180)}static deadPlayer(e){e.beginPath(),e.rect(30,20,25,40),e.fillStyle="#D95B43",e.fill(),e.beginPath(),e.rect(-25,-65,25,40),e.fillStyle="#D95B43",e.fill(),e.rotate(25*Math.PI/180),e.beginPath(),e.rect(40,-5,20,80),e.fillStyle="#C02942",e.fill(),e.rotate(-25*Math.PI/180),e.rotate(-60*Math.PI/180),e.beginPath(),e.rect(-40,20,20,45),e.fillStyle="#C02942",e.fill(),e.rotate(60*Math.PI/180),e.beginPath(),e.rect(-60,-30,120,60),e.fillStyle="#53777A",e.fill(),e.beginPath(),e.arc(20,10,35,0,2*Math.PI),e.fillStyle="#F1D4AF",e.fill(),e.rotate(-170*Math.PI/180),e.beginPath(),e.arc(0,0,32,0,180*Math.PI/180),e.fillStyle="#4d2600",e.fill(),e.rotate(170*Math.PI/180)}static enemy(e,t){e.shadowBlur=10,e.shadowColor="#8fce00",e.beginPath(),e.rect(20,35*t-20,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(-40,-35*t-20,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(-50,-10,20,90),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(30,-10,20,85),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(-60,-30,120,60),e.fillStyle="#0B486B",e.fill(),e.beginPath(),e.arc(0,0,40,0,2*Math.PI),e.fillStyle="#CFF09E",e.fill(),e.rotate(-180*Math.PI/180),e.beginPath(),e.arc(0,0,37,0,180*Math.PI/180),e.fillStyle="#880808",e.fill(),e.rotate(180*Math.PI/180)}static deadEnemy(e){e.beginPath(),e.rect(52,-30,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(26,-40,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(-25,35,20,90),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(35,-40,20,85),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(-42,-20,120,60),e.fillStyle="#0B486B",e.fill(),e.beginPath(),e.arc(10,5,35,0,2*Math.PI),e.fillStyle="#CFF09E",e.fill(),e.rotate(-170*Math.PI/180),e.beginPath(),e.arc(0,0,25,0,180*Math.PI/180),e.fillStyle="#4d2600",e.fill(),e.rotate(170*Math.PI/180)}static health(e,t,i,n){let s;e.beginPath(),e.rect(i-50,n+60,100,5),e.strokeStyle="black",e.stroke(),s=t<=35?"red":t<=75?"orange":"#50ffb0",e.beginPath(),e.rect(i-50,n+60,t,5),e.fillStyle=s,e.fill()}}const p=[{name:"Pistol",type:"gun",projectile:{color:"#F8CA00",delay:null,spread:{min:0,max:0},dps:30,dropoff:40},clip:{current:10,capacity:10},magazines:{current:2,capacity:2},trigger:!1,audio:{type:"single",fire:"./fx/audio/pistol/pistol-fire.mp3",reload:"./fx/audio/pistol/pistol-reload.mp3"}},{name:"Shotgun",type:"gun",projectile:{color:"#F8CA00",delay:null,spread:{min:-3,max:3},dps:50,dropoff:25},clip:{current:6,capacity:6},magazines:{current:2,capacity:2},trigger:!1,audio:{type:"single",fire:"./fx/audio/shotgun/shotgun-fire.mp3",reload:"./fx/audio/shotgun/shotgun-reload.mp3"}},{name:"Machine Gun",type:"gun",projectile:{color:["#CC5500","#F8CA00"],delay:null,spread:{min:0,max:0},dps:15,dropoff:40},clip:{current:225,capacity:225},magazines:{current:2,capacity:2},trigger:!0,audio:{type:"repeat",fire:"./fx/audio/machine-gun/machine-gun-fire.mp3",reload:"./fx/audio/machine-gun/machine-gun-reload.mp3"}},{name:"Flamethrower",type:"gun",projectile:{color:["#CC5500","#F8CA00"],delay:null,spread:{min:-5,max:5},dps:10,dropoff:20},clip:{current:600,capacity:600},magazines:{current:2,capacity:2},trigger:!0,audio:{type:"repeat",fire:"./fx/audio/flamethrower/flamethrower-fire.mp3",reload:"./fx/audio/flamethrower/flamethrower-reload.mp3"}},{name:"Grenade",type:"throwable",projectile:{color:["#CC5500","#F8CA00"],delay:2,spread:{min:-8,max:8},dps:75,dropoff:[20,40]},clip:{current:2,capacity:2},magazines:{current:1,capacity:1},trigger:!1,audio:{type:"single",fire:"./fx/audio/flamethrower/flamethrower-fire.mp3",reload:"./fx/audio/flamethrower/flamethrower-reload.mp3"}}],d=[{name:"lilbitch",types:["passed","kill"],enabled:!1,playback:"./fx/audio/snippets/lilbitch.mp3"},{name:"bloodyshoes",types:["passed","kill"],enabled:!1,playback:"./fx/audio/snippets/bloodyshoes.mp3"},{name:"nofucks",types:["passed","kill"],enabled:!1,playback:"./fx/audio/snippets/nofucks.mp3"},{name:"eoww",types:["hurt","kill"],enabled:!0,playback:"./fx/audio/snippets/eoww.mp3"},{name:"generic-pickup",types:["pickup"],enabled:!1,playback:"./fx/audio/snippets/pickup.mp3"},{name:"reload",types:["pickup"],enabled:!0,playback:"./fx/audio/snippets/reload.mp3"},{name:"inject",types:["pickup"],enabled:!0,playback:"./fx/audio/snippets/syringe2.mp3"}],W=["./soundtrack/track0.mp3","./soundtrack/track1.mp3","./soundtrack/track2.mp3","./soundtrack/track3.mp3","./soundtrack/track4.mp3","./soundtrack/track5.mp3"],u=new class{constructor(e=!0){this.audio={weapons:{},snippets:{}},this.soundtracks=[],this.loaded=!1,e&&this.load(["weapons","snippets","soundtrack"]),this.trackIndex=0,this.currentTrack=this.soundtracks[this.trackIndex],this.nextTrackReady=!1,this.trackListener=!1,this.fx={weapon:null,snippet:null},this.volumes=l}load(e=[]){if(e.includes("weapons"))for(const e of p)this.audio.weapons[e.name]={fire:new Audio(e.audio.fire),reload:new Audio(e.audio.reload)};if(e.includes("snippets"))for(const e of d)e.enabled&&(this.audio.snippets[e.name]={types:e.types,playback:new Audio(e.playback)});if(e.includes("soundtrack"))for(const e of W)this.soundtracks.push({name:e.split("/").pop(),playback:new Audio(e)});this.loaded=!0}stop(e){const t=this.fx[e];t&&!t.paused&&(t.pause(),t.currentTime=0)}async volume(e,t){"soundtrack"===e&&(this.volumes.soundtrack=t,this.currentTrack&&!this.currentTrack.playback.paused&&(this.currentTrack.playback.volume=this.volumes.soundtrack)),"weapon"===e&&(this.volumes.fx.weapon=t,this.fx.weapon&&!this.fx.weapon.playback.paused&&(this.fx.weapon.playback.volume=this.volumes.fx.weapon)),"snippet"===e&&(this.volumes.fx.snippet=t,this.fx.snippet&&!this.fx.snippet.playback.paused&&(this.fx.snippet.playback.volume=this.volumes.fx.snippet))}weapon({weaponIndex:e=null,equippedWeapon:t=null},i="fire",n=1){if(!this.loaded)return;const s=e?p[e]:t;s&&(this.fx.weapon="fire"===i?this.audio.weapons[s.name].fire:this.audio.weapons[s.name].reload,this.fx.weapon&&("repeat"!==s.audio.type&&this.stop("weapon"),this.fx.weapon.volume=this.volumes.fx.weapon,this.fx.weapon.playbackRate=n,this.fx.weapon.play()))}snippet({name:e=null,random:t=!1},i=1){if(!this.loaded)return;this.stop("snippet");const n=t?d[Math.floor(Math.random()*d.length)]:this.audio.snippets[e];n&&(this.fx.snippet=t?this.audio.snippets[n.name].playback:n.playback,this.fx.snippet.volume=this.volumes.fx.snippet,this.fx.weapon.playbackRate=i,this.fx.snippet.play())}soundtrack(){this.loaded&&(this.currentTrack&&this.currentTrack.playback&&(this.currentTrack.playback.paused||0===this.currentTrack.playback.currentTime)?(console.log(`now playing ${this.currentTrack.name}`),this.currentTrack.playback.volume=this.volumes.soundtrack,this.currentTrack.playback.play()):this.nextTrackReady&&(this.currentTrack.playback.pause(),this.currentTrack.playback.currentTime=0,++this.trackIndex,this.trackIndex>=this.soundtracks.length&&(this.trackIndex=0),console.log(`changed track index to ${this.trackIndex}`),this.trackListener=!1,this.currentTrack=this.soundtracks[this.trackIndex]),this.currentTrack&&!this.trackListener&&(this.nextTrackReady=!1,this.currentTrack.playback.addEventListener("ended",(()=>{this.nextTrackReady=!0,this.trackListener=!0}))))}};class m{constructor(e){this.type="player",this.bounding="arc",this.x=e.x*t,this.y=e.y*t,this.angle=0,this.position=0,this.incrementer=0,this.speed=5,this.stamina=!1,this.staminaAmount=0,this.sleep=!0,this.invincible=!1,this.health=100,this.damage={x:0,y:0},this.dead=!1}render(e){c.render(this,e)}update(e){if(this.sleep||this.dead)return;let t=0;t+=e.keyboard.up?1:0,t+=e.keyboard.down?1:0,t+=e.keyboard.left?1:0,t+=e.keyboard.right?1:0;let i=this.speed;t>1&&(i/=Math.sqrt(2)),Math.abs(this.damage.x)!=0<Math.abs(this.damage.y)!=0?(this.damage.x*=.9,this.damage.y*=.9,this.x+=this.damage.x,this.y+=this.damage.y,Math.abs(this.damage.x)<.5&&Math.abs(this.damage.y)<.5&&(this.damage={x:0,y:0},this.invincible=!1)):(e.keyboard.up&&(this.y-=i),e.keyboard.down&&(this.y+=i),e.keyboard.left&&(this.x-=i),e.keyboard.right&&(this.x+=i));const n=h.entityToWalls(this,e.walls);this.x+=n.x*i,this.y+=n.y*i;let s=e.camera.offsetX+e.context.canvas.width/2-e.mouse.x,a=e.camera.offsetY+e.context.canvas.height/2-e.mouse.y;const o=h.distance(s,a);o>0&&(s/=o,a/=o,this.angle=Math.atan2(a,s)+90*Math.PI/180),(e.keyboard.up||e.keyboard.down||e.keyboard.left||e.keyboard.right)&&(this.incrementer+=this.speed),this.position=Math.sin(this.incrementer*Math.PI/180)}takeDamage(e){if(!this.invincible){const t=this.x-e.x,i=this.y-e.y,n=h.distance(t,i);n>0&&(this.damage.x=t/n*20,this.damage.y=i/n*20,this.invincible=!0,this.health-=25,this.health=this.health<0?0:this.health,0==this.health&&(u.snippet({name:"eoww"}),this.dead=!0))}}boostSpeed(e){this.speed=e,setTimeout((()=>{this.speed=5}),3e3)}refillHealth(e){if(this.health<100){const t=this.health+e;t<=100&&(this.health=t)}}}class y{constructor(e){this.type="enemy",this.bounding="arc",this.x=e.x*t,this.y=e.y*t,this.angle=0,this.position=0,this.incrementer=0,this.speed=3,this.sleep=!0,this.pushAlongVelocity={x:0,y:0},this.pushProjectileVelocity={x:0,y:0},this.canBePushedByProjectile=!0,this.lastVectorX=0,this.lastVectorY=0,this.health=100,this.dead=!1,this.allEnemiesDead=!1}render(e){c.render(this,e)}update(t){if(this.sleep||this.dead)return;if(h.entityToPlayer(this,t),Math.random()<=.1)for(let e=0;e<t.enemies.length;e++){const i=t.enemies[e];if(i!=this){let e=i.x-this.x,t=i.y-this.y;const n=h.distance(e,t);0!=n&&n<100&&(e/=n,t/=n,i.pushAlong(e,t))}i.dead&&t.enemies.splice(e,1)}this.pushAlongVelocity.x*=.9,this.pushAlongVelocity.y*=.9,this.x+=this.pushAlongVelocity.x,this.y+=this.pushAlongVelocity.y;const i={x:this.x-e,y:this.y-e,width:2*e,height:2*e};for(let e=0;e<t.ballistics.projectiles.length;e++){const n=t.ballistics.projectiles[e];h.intersection(i,n.bounds)&&(n.markToDelete=!0,this.pushByProjectile(n,t.ballistics.weapon.projectile.dps,t.enemies))}this.pushProjectileVelocity.x*=.9,this.pushProjectileVelocity.y*=.9,this.x+=this.pushProjectileVelocity.x,this.y+=this.pushProjectileVelocity.y,Math.abs(this.pushProjectileVelocity.x)<.5&&Math.abs(this.pushProjectileVelocity.y)<.5&&(this.canBePushedByProjectile=!0,this.pushProjectileVelocity.x=0,this.pushProjectileVelocity.y=0)}pushAlong(e,t){this.pushAlongVelocity.x=10*e,this.pushAlongVelocity.y=10*t}pushByProjectile(e,t,i){this.canBePushedByProjectile&&(this.pushProjectileVelocity.x=15*e.vectorX,this.pushProjectileVelocity.y=15*e.vectorY,this.canBePushedByProjectile=!1,this.health-=t,this.health=this.health<0?0:this.health,0==this.health&&(this.dead=!0,document.querySelector("body").style.background="radial-gradient(white 5%, green 30%, black 100%)",setTimeout((()=>{document.querySelector("body").style.background="black"}),50),1===i.length&&(i.length=0,this.allEnemiesDead=!0)))}}class f{constructor(e,i,n=!1){this.type="wall",this.bounding="box",this.x=e*t,this.y=i*t,this.sleep=!0,this.textured=n,this.image=null,this.textured&&(this.textured=!0,this.image=new Image,this.image.src="img/wall.webp",this.image.width=t,this.image.height=t),this.bounds={x:this.x,y:this.y,width:t,height:t}}render(e){this.sleep||(e.shadowColor="#2b2b2b",e.shadowBlur=5,e.shadowOffsetX=10,e.shadowOffsetY=10,this.textured?this.image.complete?e.drawImage(this.image,this.x,this.y,t,t):this.image.onload=()=>e.drawImage(this.image,this.x,this.y,t,t):(e.beginPath(),e.rect(this.x,this.y,t,t),e.fillStyle="#444444",e.fill()))}}class g{constructor(e,i){this.type="pickup",this.item="ammo",this.value=n,this.bounding="arc",this.x=e*t,this.y=i*t,this.bounds={x:this.x,y:this.y,width:t,height:t},this.sleep=!0,this.image=new Image,this.image.src="img/magazine.png",this.glow=40,this.color="#F8CA00",this.markToDelete=!1}render(e){c.render(this,e)}update(e){h.entityToPlayer(this,e,(()=>{this.pickup()}))}pickup(){u.snippet({name:"reload"}),this.markToDelete=!0}}class x{constructor(e,i){this.type="pickup",this.item="health",this.value=s,this.bounding="arc",this.x=e*t,this.y=i*t,this.bounds={x:this.x,y:this.y,width:t,height:t},this.sleep=!0,this.image=new Image,this.image.src="img/first-aid-box.png",this.glow=40,this.color="#6C95C2",this.markToDelete=!1}render(e){c.render(this,e)}update(e){h.entityToPlayer(this,e,(()=>{this.pickup()}))}pickup(){u.snippet({name:"inject"}),this.markToDelete=!0}}class b{constructor(e,i){this.type="pickup",this.item="stamina",this.value=a,this.bounding="arc",this.x=e*t,this.y=i*t,this.bounds={x:this.x,y:this.y,width:t,height:t},this.sleep=!0,this.image=new Image,this.image.src="img/stamina.png",this.glow=40,this.color="#F5F5F5",this.markToDelete=!1}render(e){c.render(this,e)}update(e){h.entityToPlayer(this,e,(()=>{this.pickup()}))}pickup(){u.snippet({name:"inject"}),this.markToDelete=!0}}class k{constructor(t,i,n){this.vectorX=Math.cos(i.angle+90*Math.PI/180+5*n*Math.PI/180),this.vectorY=Math.sin(i.angle+90*Math.PI/180+5*n*Math.PI/180),this.x=i.x+this.vectorX*e*1.5,this.y=i.y+this.vectorY*e*1.5,this.radius=5,this.bounds={x:this.x-this.radius,y:this.y-this.radius,width:2*this.radius,height:2*this.radius},this.context=t,this.frames=0,this.markToDelete=!1}update(e,t=25){this.x+=this.vectorX*t,this.y+=this.vectorY*t,this.bounds.x=this.x-this.radius,this.bounds.y=this.y-this.radius,this.frames++,this.frames>15&&(this.markToDelete=!0);for(let t=0;t<e.length;t++){const i=e[t];h.intersection(i.bounds,this.bounds)&&(this.markToDelete=!0)}}render(e){Array.isArray(e)&&(e=e[Math.floor(Math.random()*e.length)]),this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fillStyle=e,this.context.fill()}}class w{constructor(t,i,n){this.vectorX=Math.cos(i.angle+90*Math.PI/180+5*n*Math.PI/180),this.vectorY=Math.sin(i.angle+90*Math.PI/180+5*n*Math.PI/180),this.x=i.x+this.vectorX*e*1.5,this.y=i.y+this.vectorY*e*1.5,this.radius=5,this.bounds={x:this.x-this.radius,y:this.y-this.radius,width:2*this.radius,height:2*this.radius},this.context=t,this.frames=0,this.markToDelete=!1}update(e,t=25){this.x+=this.vectorX*t,this.y+=this.vectorY*t,this.bounds.x=this.x-this.radius,this.bounds.y=this.y-this.radius,this.frames++,this.frames>15&&(this.markToDelete=!0);for(let t=0;t<e.length;t++){const i=e[t];h.intersection(i.bounds,this.bounds)&&(this.markToDelete=!0)}}render(e){Array.isArray(e)&&(e=e[Math.floor(Math.random()*e.length)]),this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fillStyle=e,this.context.fill()}}class P{constructor(){this.weapon=null,this.trigger=!0,this.frames=0,this.projectiles=[],this.indexesToDelete=[]}update(e){this.weapon=p[e.selectedWeaponIndex],this.setEquippedWeaponDisplayInformation(),this.weapon&&this.trigger&&!e.player.dead?(document.querySelector("#out-of-ammo").style.display="none",e.mouse.pressed?this.handleFire(e.context,e.player):u.stop("weapon")):(this.frames++,this.frames>=60&&(this.frames=0,this.trigger=!0)),this.cleanupProjectiles(e.walls)}render(){for(let e=0;e<this.projectiles.length;e++)this.projectiles[e].render(this.weapon.projectile.color)}handleFire(e,t){this.shouldReloadWeaponAmmoClip()||(--this.weapon.clip.current,u.weapon({equippedWeapon:this.weapon},"fire",1.5),this.registerProjectiles(e,t),this.trigger=this.weapon.trigger)}setEquippedWeaponDisplayInformation(){const{name:e,clip:t,magazines:i}=this.weapon;document.querySelector("#equipped-weapon").innerHTML=e,document.querySelector("#ammo-remaining").innerHTML=t.current,document.querySelector("#ammo-capacity").innerHTML=t.capacity,document.querySelector("#magazines-remaining").innerHTML=i.current,document.querySelector("#magazines-total").innerHTML=i.capacity}shouldReloadWeaponAmmoClip(){if(this.weapon.clip.current<=0){if(!(this.weapon.magazines.current>0))return this.weapon.clip.current=0,document.querySelector("#out-of-ammo").style.display="inline",!0;--this.weapon.magazines.current,this.refillWeaponAmmoClip()}return!1}refillWeaponAmmoClip(){this.weapon.clip.current===this.weapon.clip.capacity?this.weapon.magazines.current<this.weapon.magazines.capacity&&++this.weapon.magazines.current:this.weapon.clip.current=this.weapon.clip.capacity}registerProjectiles(e,t){const{spread:i,delay:n}=this.weapon.projectile;for(let s=i.min;s<=i.max;s++){const i="throwable"===this.weapon.type&&n?new w(e,t,s):new k(e,t,s);this.projectiles.push(i)}}cleanupProjectiles(e){this.indexesToDelete=[];for(let t=0;t<this.projectiles.length;t++)this.projectiles[t].update(e,this.weapon.projectile.dropoff),this.projectiles[t].markToDelete&&this.indexesToDelete.push(t);for(let e=0;e<this.indexesToDelete.length;e++)this.projectiles.splice(this.indexesToDelete[e],1)}}class v{constructor(e,t=0){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.context=e,this.frames=t}update(i,n){if(this.frames++,this.frames>=15){this.frames=0;const s={x:i.x-this.offsetX-this.context.canvas.width/2-this.size,y:i.y-this.offsetY-this.context.canvas.height/2-this.size,width:this.context.canvas.width+2*this.size,height:this.context.canvas.height+2*this.size};for(let i=0;i<n.length;i++){const a=n[i],o={};"arc"===a.bounding?(o.x=a.x-e,o.y=a.y-e,o.width=2*e,o.height=2*e):"box"===a.bounding&&(o.x=a.x,o.y=a.y,o.width=t,o.height=t),a.sleep=!h.intersection(o,s)}}}resize(){}newScene(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)}preRender(e){const t=-e.x+this.context.canvas.width/2,i=-e.y+this.context.canvas.height/2,n=t-this.x,s=i-this.y;this.offsetX=this.x-t,this.offsetY=this.y-i,this.x+=n/10,this.y+=s/10,this.context.save(),this.context.translate(this.x,this.y)}postRender(){this.context.restore()}}const E=[["W W W W W W W W W W W W W W W W W W W W","W           W                         W","W           W   H   S                 W","W   P   W               H   A     E   W","W             A     W                 W","W W W W W     W W W W             E   W","W       W                 H           W","W   E   W   S     A   S       W   E   W","W       W                             W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W       W                             W","W   A   W   S     E             H     W","W   E   W                             W","W       W           E     W W W W W W W","W     W W                             W","W                   E                 W","W         E               S     E     W","W                                     W","W W W W W W W W W W W W W W           W","W                         W           W","W   H A E                 W           W","W                   E     W           W","W W W W W W W             W           W","W                         W     E     W","W               W W W W W W           W","W   P                     W           W","W                                     W","W         W W W                   E   W","W           W       E                 W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W          W                          W","W          W        E           E     W","W     P    W  E           S           W","W          W                  W W W W W","W               W         W           W","W               W   E                 W","W           E   W               E     W","W               W                     W","W W W W     W W W W W W W W     W     W","W                         W           W","W     E     E             W     E     W","W                   E     W           W","W W W W W W W             W           W","W       W         S       W           W","W   A   W   E         W W W W     W W W","W   E   W                 W           W","W                                 A   W","W     H   W W W             H     E   W","W           W       E                 W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W                 W                   W","W   A       E     W     E    E    A   W","W                 W                   W","W                                     W","W W W W W W           W   H     W     W","W         W     W                     W","W   E H   W     W     E               W","W               W            S        W","W W W W         W W W W W W           W","W            E  W         W     E     W","W   E                 E   W           W","W       E                 W           W","W   A        S  W         W     W     W","W               W     E   W           W","W W W W W W W W W         W W W       W","W                                     W","W   E     E         E         P       W","W   A   E       W         W           W","W               W     E   W           W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W                 W           W       W","W A   W   E   E   W     E     W   E   W","W     W           W           W       W","W   H     E       W     E     W   E   W","W                 W                   W","W   E       S                         W","W                   E   W     W       W","W         W W W W W           W       W","W   E             W     S     W   E   W","W            A    W           W       W","W   E             W     E     W     W W","W         W W W W W                   W","W   E                   W             W","W             W               W   H   W","W       W           W W W W W W       W","W W W W W   E E     W               E W","W                   W     A     W     W","W   P       W       W     A     W   E W","W                   W           W     W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W W W W W W","W                                               W","W     E       E             E     H             W","W                   W W W             E     E   W","W   E                             W       W     W","W     W W     E                                 W","W                   W W W             E     S   W","W     A   S   E     W             E             W","W                                   H     W     W","W       W     W W W               W       W     W","W   E   W         W   E   W   E   W   E   W     W","W       W     A   W       W       W             W","W W W W W     W W W W W W W W W W W       W W W W","W       W     W                   W             W","W   E   W     W   A         S     W       W     W","W       W             W W                 W     W","W             E       W W                       W","W     W     W     E             W     E     E   W","W           W                   W               W","W   E       W W W W W W W W W W W W W W     W W W","W                                 W             W","W   E       W W W W W       A     W   A         W","W                   W   E   A     W       P     W","W             H     W             W             W","W W W W W W W W W W W W W W W W W W W W W W W W W"]];class S{constructor(){this.levels=E,this.newMapConfiguration()}generate(e=1){const t=E[e];for(let e=0;e<t.length;e++){const i=t[e];for(let t=0;t<i.length;t+=2){const n=t/2;switch(i[t]){case"W":this.wallPositions.push({x:n,y:e});break;case"E":this.enemyPositions.push({x:n,y:e});break;case"A":this.ammoPickupPositions.push({x:n,y:e});break;case"H":this.healthPickupPositions.push({x:n,y:e});break;case"S":this.staminaPickupPositions.push({x:n,y:e});break;case"P":this.playerPosition={x:n,y:e}}}}}newMapConfiguration(){this.playerPosition={x:0,y:0},this.enemyPositions=[],this.wallPositions=[],this.ammoPickupPositions=[],this.healthPickupPositions=[],this.staminaPickupPositions=[]}getPlayerPosition(){return this.playerPosition}getEnemyPositions(){return this.enemyPositions}getWallPositions(){return this.wallPositions}getAmmoPickupPositions(){return this.ammoPickupPositions}getHealthPickupPositions(){return this.healthPickupPositions}getStaminaPickupPositions(){return this.staminaPickupPositions}}var M=i(466),T=i.n(M);class A{constructor(e){this.frame=null,this.stopped=!1,this.context=e,this.camera=new v(this.context),this.keyboard=o,this.mouse=r,this.map=new S,this.currentLevel=1,this.newGameEntities(),this.gameover=!1,this.levelPassed=!1;const t=()=>this.onResize(window.innerWidth,window.innerHeight);window.addEventListener("resize",t),t(),this.createKeyboardMouseControls(),this.createVolumeControls(),this.stats=new(T())}loop(){this.stats.begin(),u.soundtrack(),this.stopped||(this.frame=null,this.onUpdate(),this.onRender()),this.gameover&&(this.displayGameEnd(),this.restart()),this.stats.end(),this.run()}run(){this.frame||this.stopped||(this.frame=requestAnimationFrame(this.loop.bind(this)))}restart(){this.levelPassed?this.stop().then((async e=>await this.start(e,!0))):this.stop().then((async e=>await this.start(e,!1)))}async start(e,t=!1){if(e&&!this.frame){const e=document.querySelector(".game-ended");t&&++this.currentLevel,setTimeout((()=>{e.style.display="none",this.setup({level:this.currentLevel},!0)}),2e3)}}async pause(){const e=document.querySelector('span[data-hotkey="P"]'),t=document.querySelector("#game-pause-state"),i="help-block__hotkey--active";return this.stopped?(e.classList.remove(i),t.innerHTML="Pause Game",this.stopped=!1,this.frame=requestAnimationFrame(this.loop.bind(this))):(this.stopped=!0,cancelAnimationFrame(this.frame),e.classList.add(i),t.innerHTML="Game Paused"),this.stopped}async stop(){return this.stopped=!0,this.frame=null,cancelAnimationFrame(this.loop.bind(this)),this.stopped}setup({level:e=1},t=!1){this.frame=null,this.stopped=!1,this.gameover=!1,this.currentLevel=e,this.levelPassed=!1,this.newGameEntities(),this.generateMap(e).createPlayer().createEnemies().createWalls().createAmmoPickups().createHealthPickups().createStaminaPickups(),document.querySelector("#current-level").innerHTML=this.currentLevel,this.setWeaponHotKey(),this.onResize(window.innerWidth,window.innerHeight),t&&this.loop()}newGameEntities(){this.player=null,this.entities=[],this.walls=[],this.enemies=[],this.ammoPickups=[],this.healthPickups=[],this.staminaPickups=[],this.selectedWeaponIndex=0,this.ballistics=new P}onUpdate(){this.camera.update(this.player,this.entities),this.ballistics.update(this);for(let e=0;e<this.entities.length;e++)this.canUpdateEntity(this.entities[e])&&this.entities[e].update(this),"player"===this.entities[e].type&&this.isPlayerDead(this.entities[e])&&(this.gameover=!0),"enemy"===this.entities[e].type&&this.areAllEnemiesDead(this.entities[e])&&(this.gameover=!0,this.levelPassed=!0),"pickup"===this.entities[e].type&&this.entities[e].markToDelete&&("ammo"===this.entities[e].item&&this.ballistics.refillWeaponAmmoClip(),"health"===this.entities[e].item&&this.player.refillHealth(this.entities[e].value),"stamina"===this.entities[e].item&&this.player.boostSpeed(this.entities[e].value),this.entities.splice(e,1));document.querySelector("#enemies-remaining").innerHTML=this.enemies.length}onRender(){this.camera.newScene(),this.camera.preRender(this.player),this.ballistics.render();for(let e=0;e<this.entities.length;e++)this.entities[e].render(this.context);this.camera.postRender()}onResize(e,t){this.context.canvas.width=e,this.context.canvas.height=t,this.camera.resize()}generateMap(e=0){return this.map.newMapConfiguration(),this.map.generate(e),this}canUpdateEntity(e){return void 0!==e&&"function"==typeof e.update}createPlayer(){return this.player=new m(this.map.getPlayerPosition()),this.entities.push(this.player),this}createEnemies(){for(let e=0;e<this.map.getEnemyPositions().length;e++){const t=new y(this.map.getEnemyPositions()[e]);this.entities.push(t),this.enemies.push(t)}return this}createWalls(){for(let e=0;e<this.map.getWallPositions().length;e++){const t=this.map.getWallPositions()[e],i=new f(t.x,t.y,!0);this.entities.push(i),this.walls.push(i)}return this}createAmmoPickups(){for(let e=0;e<this.map.getAmmoPickupPositions().length;e++){const t=this.map.getAmmoPickupPositions()[e],i=new g(t.x,t.y);this.entities.push(i),this.ammoPickups.push(i)}return this}createHealthPickups(){for(let e=0;e<this.map.getHealthPickupPositions().length;e++){const t=this.map.getHealthPickupPositions()[e],i=new x(t.x,t.y);this.entities.push(i),this.healthPickups.push(i)}return this}createStaminaPickups(){for(let e=0;e<this.map.getStaminaPickupPositions().length;e++){const t=this.map.getStaminaPickupPositions()[e],i=new b(t.x,t.y);this.entities.push(i),this.staminaPickups.push(i)}return this}isPlayerDead(e){return"player"===e.type&&e.dead}areAllEnemiesDead(e){return"enemy"===e.type&&e.allEnemiesDead}displayGameEnd(){const e=document.querySelector(".game-ended");setTimeout((()=>{this.levelPassed?(e.querySelector("h1").innerHTML="You Win!",e.classList.add("pass"),e.classList.remove("fail")):(e.querySelector("h1").innerHTML="You Died!",e.classList.remove("pass"),e.classList.add("fail")),e.style.display="flex"}),500)}setWeaponHotKey(){const e=document.querySelectorAll("span.help-block__hotkey"),t="help-block__hotkey--active";for(const i of e){const{hotkey:e}=i.dataset;e&&(parseInt(e)!==this.selectedWeaponIndex+1?i.classList.remove(t):i.classList.add(t))}}createKeyboardMouseControls(){window.addEventListener("keydown",(async e=>{"p"===e.key&&await this.pause()})),document.addEventListener("keydown",(e=>{switch(e.key){case"w":this.keyboard.up=!0;break;case"s":this.keyboard.down=!0;break;case"a":this.keyboard.left=!0;break;case"d":this.keyboard.right=!0;break;case"1":this.selectedWeaponIndex=0,this.setWeaponHotKey();break;case"2":this.selectedWeaponIndex=1,this.setWeaponHotKey();break;case"3":this.selectedWeaponIndex=2,this.setWeaponHotKey();break;case"4":this.selectedWeaponIndex=3,this.setWeaponHotKey();break;case"5":this.selectedWeaponIndex=4,this.setWeaponHotKey();break;case"*":this.toggleStats()}})),document.addEventListener("keyup",(e=>{switch(e.key){case"w":this.keyboard.up=!1;break;case"s":this.keyboard.down=!1;break;case"a":this.keyboard.left=!1;break;case"d":this.keyboard.right=!1}})),document.addEventListener("mousemove",(e=>{this.mouse.x=e.clientX,this.mouse.y=e.clientY})),document.addEventListener("mousedown",(()=>{this.mouse.pressed=!0})),document.addEventListener("mouseup",(()=>{this.mouse.pressed=!1}))}createVolumeControls(){document.querySelector("#soundtrack-volume").addEventListener("input",(e=>{const{target:t}=e,i=(t.value-t.min)/(t.max-t.min),n=Math.round(100*i);t.style.background="linear-gradient(to right, #50ffb0 0%, #50ffb0 "+n+"%, #fff "+n+"%, #fff 100%)",u.volume("soundtrack",i)}))}toggleStats(e=0){this.stats.showPanel(e),this.statsShown?(this.stats.domElement.style.cssText="display:none;",this.statsShown=!1):(this.stats.domElement.style.cssText="position:absolute;top:0px;right:0px;",this.statsShown=!0);const t=document.querySelector(".stats");t&&t.appendChild(this.stats.dom)}}var I=i(379),_=i.n(I),j=i(795),D=i.n(j),L=i(569),C=i.n(L),H=i(565),q=i.n(H),z=i(216),B=i.n(z),R=i(589),V=i.n(R),F=i(909),Y={};Y.styleTagTransform=V(),Y.setAttributes=q(),Y.insert=C().bind(null,"head"),Y.domAPI=D(),Y.insertStyleElement=B(),_()(F.Z,Y),F.Z&&F.Z.locals&&F.Z.locals;const X=document.querySelector("#undead-bytes"),$=document.querySelector(".splash"),G=document.querySelector("canvas#game");document.querySelector("#play-now").addEventListener("click",(()=>{$&&(document.body.classList.remove("body-splash"),$.style.display="none",X.classList.remove("inactive")),function(){if(!X.classList.contains("inactive")&&G){const e=new A(G.getContext("2d"));e.setup({level:1},!0),window.addEventListener("keydown",(function(e){const t=document.querySelector(`[data-key="${e.key}"]`);"w"!==e.key&&"a"!==e.key&&"s"!==e.key&&"d"!==e.key||t&&t.classList.add("keyboard__key--active")})),window.addEventListener("keyup",(e=>{const t=document.querySelector(`[data-key="${e.key}"]`);t&&t.classList.remove("keyboard__key--active")})),function(e,t=2e3){console.log("%c Logging game data to console","background: #222; color: yellow"),console.log(`%c Refreshes every ${(t%6e4/1e3).toFixed(2)} seconds`,"background: #222; color: yellow"),setInterval((()=>{const t=`W: ${e.walls.length} | E: ${e.enemies.length} | A: ${e.ammoPickups.length} | H: ${e.healthPickups.length}`;var i;console.log(`%c Player Health: ${e.player.health}`,"background: #222; color: #bfff00"),console.log(`%c Enemies Alive: ${e.enemies.length}`,"background: #222; color: #FF033E"),console.log(`%c Gameover State: ${e.gameover}`,"background: #222; color: #00ffff"),console.log("%c Entity Data:","background: #222; color: #ffffff"),console.log(`%c Total: ${e.entities.length} | Curr: ${i=e,i.walls.length+i.enemies.length+i.ammoPickups.length+i.healthPickups.length+1}`,"background: #222; color: #ffffff"),console.log(`%c ${t}\n\n`,"background: #222; color: #ffffff")}),t)}(e,1e4)}}()}))})()})();