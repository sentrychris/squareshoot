(()=>{"use strict";var e={556:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(81),a=i.n(s),n=i(645),o=i.n(n)()(a());o.push([e.id,"html, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background: black;\n}\n\n.help {\n  position: absolute;\n  top: 30px;\n  left: 20px;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  font-size: 1.2rem;\n  color: white;\n  background: rgba(34, 34, 34, 0.75);\n  border: 1px solid rgb(34, 34, 34);\n  border-radius: 5px;\n  padding: 15px;\n}\n\n.help p {\n  margin-top: 0;\n  margin-bottom: 10px;\n}\n\n.help hr {\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\n#current-level {\n  color: #74f074;\n}\n\n#equipped-weapon {\n  color: #27a2f5;\n}\n\n#enemies-remaining {\n  color: #ff4040;\n}\n\n#out-of-ammo {\n  display: none;\n  color: #be3e3e;\n}\n\n.game-ended-wrapper {\n  display: none;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  text-align: center;\n}\n\n.game-ended {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n}\n\n.game-ended h1 {\n  margin-bottom: 0;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  font-size: 6rem;\n  color: white;\n  text-transform: uppercase;\n}\n\n.level-failed {\n  background: rgba(197, 13, 13, 0.8);\n}\n\n.level-passed {\n  background: rgba(13, 197, 38, 0.712);\n}\n\n.out-of-ammo {\n  border: none;\n  color: rgba(255, 255, 255, 0.5);\n  text-align: center;\n  text-shadow: 1px 5px 4px rgba(0, 0, 0, .3), 0 0 2px rgb(221, 145, 145), 0 0 10px;\n}\n\n.out-of-ammo span {\n  animation: blink .7s infinite alternate;\n}\n\n.out-of-ammo span.delay {\n  animation-duration: 6s;\n  animation-delay: 2s;\n  animation-direction: alternate cubic-bezier(0.5, 0.2, 0.3, 1.0)\n}\n\n@keyframes blink {\n  0% {}\n  50% {}\n  80% {\n    text-shadow: 0 0 2px rgba(255, 255, 255, .1), 0 0 10px rgba(255, 255, 255, .4);\n    text-stroke: 2px rgba(255, 255, 255, 0.05);\n  }\n}\n\n.keyboard {\n  width: 300px;\n  margin: 0 auto;\n}\n.keyboard .top-row {\n  width: 120px;\n  margin: 0 auto;\n}\n.keyboard .bottom-row {\n  display: inline-flex;\n}\n.keyboard-key {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #353943;\n  border: 1px solid #8fce00;\n  box-shadow: 3px 3px #d9ff82;\n  border-radius: 5px;\n  color: #ffffff;\n  width: 60px;\n  margin: 15px;\n  text-align: center;\n  top: 0;\n  left: 0;\n  transition: all 0.07s ease;\n}\n.keyboard-key__active {\n  background: #ffffff;\n  color: #000000;\n  box-shadow: 3px 3px #7e7e7d;\n}\n.keyboard-key > p {\n  margin-top: 5px;\n  margin-bottom: 10px;\n}",""]);const r=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,a,n){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(s)for(var r=0;r<this.length;r++){var l=this[r][0];null!=l&&(o[l]=!0)}for(var h=0;h<e.length;h++){var c=[].concat(e[h]);s&&o[c[0]]||(void 0!==n&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=n),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var n={},o=[],r=0;r<e.length;r++){var l=e[r],h=s.base?l[0]+s.base:l[0],c=n[h]||0,W="".concat(h," ").concat(c);n[h]=c+1;var d=i(W),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var u=a(p,s);s.byIndex=r,t.splice(r,0,{identifier:W,updater:u,references:1})}o.push(W)}return o}function a(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,a){var n=s(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<n.length;o++){var r=i(n[o]);t[r].references--}for(var l=s(e,a),h=0;h<n.length;h++){var c=i(n[h]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}n=l}}},569:e=>{var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var a=void 0!==i.layer;a&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,a&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={id:s,exports:{}};return e[s](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0,(()=>{const e=[{name:"Pistol",type:"gun",projectile:{color:"#F8CA00",spread:{min:0,max:0},dps:30,dropoff:40},clip:{current:10,capacity:10},magazines:{current:2,capacity:2},trigger:!1,audio:{type:"repeat",fire:"./fx/audio/pistol/pistol-fire.mp3",reload:"./fx/audio/pistol/pistol-reload.mp3"}},{name:"Shotgun",type:"gun",projectile:{color:"#F8CA00",spread:{min:-3,max:3},dps:50,dropoff:25},clip:{current:6,capacity:6},magazines:{current:2,capacity:2},trigger:!1,audio:{type:"repeat",fire:"./fx/audio/shotgun/shotgun-fire.mp3",reload:"./fx/audio/shotgun/shotgun-reload.mp3"}},{name:"Machine Gun",type:"gun",projectile:{color:["#CC5500","#F8CA00"],spread:{min:0,max:0},dps:15,dropoff:40},clip:{current:225,capacity:225},magazines:{current:2,capacity:2},trigger:!0,audio:{type:"repeat",fire:"./fx/audio/machine-gun/machine-gun-fire.mp3",reload:"./fx/audio/machine-gun/machine-gun-reload.mp3"}},{name:"Flamethrower",type:"gun",projectile:{color:["#CC5500","#F8CA00"],spread:{min:-5,max:5},dps:10,dropoff:20},clip:{current:600,capacity:600},magazines:{current:2,capacity:2},trigger:!0,audio:{type:"repeat",fire:"./fx/audio/flamethrower/flamethrower-fire.mp3",reload:"./fx/audio/flamethrower/flamethrower-reload.mp3"}}],t=new class{constructor(){this.audio={weapons:{}};for(const t of e)this.audio.weapons[t.name]={fire:new Audio(t.audio.fire),reload:new Audio(t.audio.reload)};this.playback=null}weapon({weaponIndex:t=null,equippedWeapon:i=null},s="fire",a=1){const n=t?e[t]:i;n&&(this.playback="fire"===s?this.audio.weapons[n.name].fire:this.audio.weapons[n.name].reload,this.playback&&(this.playback.volume=.3,"repeat"!==n.audio.type&&this.stop(),this.playback.playbackRate=a,this.playback.play()))}stop(){this.playback&&!this.playback.paused&&(this.playback.pause(),this.playback.currentTime=0)}},s=60,a=150,n={up:!1,down:!1,left:!1,right:!1},o={x:0,y:0,pressed:!1};class r{static arcWallVector({arcX:e,arcY:t,radius:i,wallX:s,wallY:a,size:n}){const o=Math.abs(e-s-n/2),r=Math.abs(t-a-n/2);if(o>n/2+i)return!1;if(r>n/2+i)return!1;if(o<=n/2)return!0;if(r<=n/2)return!0;const l=o-n/2,h=r-n/2;return l*l+h*h<=i*i}static vector(e,t,i){const s={x:0,y:0};for(let n=0;n<i.length;n++){const o=i[n];if(r.arcWallVector({arcX:e,arcY:t,radius:60,wallX:o.x,wallY:o.y,size:a})){let i=e-(o.x+75),a=t-(o.y+75);const n=Math.sqrt(i*i+a*a);n>0&&(i/=n,a/=n,s.x+=i,s.y+=a)}}return s}}class l{static player(e,t){e.shadowBlur=5,e.shadowColor="white",e.beginPath(),e.rect(20,35*t-20,25,40),e.fillStyle="#D95B43",e.fill(),e.beginPath(),e.rect(-40,-35*t-20,25,40),e.fillStyle="#D95B43",e.fill(),e.rotate(30*Math.PI/180),e.beginPath(),e.rect(40,-10,20,80),e.fillStyle="#C02942",e.fill(),e.rotate(-30*Math.PI/180),e.rotate(-50*Math.PI/180),e.beginPath(),e.rect(-55,-20,20,45),e.fillStyle="#C02942",e.fill(),e.rotate(50*Math.PI/180),e.beginPath(),e.rect(-60,-30,120,60),e.fillStyle="#53777A",e.fill(),e.beginPath(),e.rect(-12.5,30,25,70),e.fillStyle="gray",e.fill(),e.beginPath(),e.arc(0,0,40,0,2*Math.PI),e.fillStyle="#F1D4AF",e.fill(),e.rotate(-180*Math.PI/180),e.beginPath(),e.arc(0,0,50,0,180*Math.PI/180),e.fillStyle="#454B1B",e.fill(),e.rotate(180*Math.PI/180)}static deadPlayer(e){e.beginPath(),e.rect(30,20,25,40),e.fillStyle="#D95B43",e.fill(),e.beginPath(),e.rect(-25,-65,25,40),e.fillStyle="#D95B43",e.fill(),e.rotate(25*Math.PI/180),e.beginPath(),e.rect(40,-5,20,80),e.fillStyle="#C02942",e.fill(),e.rotate(-25*Math.PI/180),e.rotate(-60*Math.PI/180),e.beginPath(),e.rect(-40,20,20,45),e.fillStyle="#C02942",e.fill(),e.rotate(60*Math.PI/180),e.beginPath(),e.rect(-60,-30,120,60),e.fillStyle="#53777A",e.fill(),e.beginPath(),e.arc(20,10,35,0,2*Math.PI),e.fillStyle="#F1D4AF",e.fill(),e.rotate(-170*Math.PI/180),e.beginPath(),e.arc(0,0,32,0,180*Math.PI/180),e.fillStyle="#4d2600",e.fill(),e.rotate(170*Math.PI/180)}static enemy(e,t){e.shadowBlur=10,e.shadowColor="#8fce00",e.beginPath(),e.rect(20,35*t-20,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(-40,-35*t-20,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(-50,-10,20,90),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(30,-10,20,85),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(-60,-30,120,60),e.fillStyle="#0B486B",e.fill(),e.beginPath(),e.arc(0,0,40,0,2*Math.PI),e.fillStyle="#CFF09E",e.fill(),e.rotate(-180*Math.PI/180),e.beginPath(),e.arc(0,0,37,0,180*Math.PI/180),e.fillStyle="#880808",e.fill(),e.rotate(180*Math.PI/180)}static deadEnemy(e){e.beginPath(),e.rect(52,-30,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(26,-40,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(-25,35,20,90),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(35,-40,20,85),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(-42,-20,120,60),e.fillStyle="#0B486B",e.fill(),e.beginPath(),e.arc(10,5,35,0,2*Math.PI),e.fillStyle="#CFF09E",e.fill(),e.rotate(-170*Math.PI/180),e.beginPath(),e.arc(0,0,25,0,180*Math.PI/180),e.fillStyle="#4d2600",e.fill(),e.rotate(170*Math.PI/180)}static health(e,t,i,s){let a;e.beginPath(),e.rect(i-50,s+60,100,5),e.strokeStyle="black",e.stroke(),a=t<=35?"red":t<=75?"orange":"lime",e.beginPath(),e.rect(i-50,s+60,t,5),e.fillStyle=a,e.fill()}}class h{static intersection(e,t){return!(e.x+e.width<t.x||e.y+e.height<t.y||e.x>t.x+t.width||e.y>t.y+t.height)}static beginRotationOffset(e,t,i,s){e.translate(-(-t+e.canvas.width/2),-(-i+e.canvas.height/2)),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(s)}static endRotationOffset(e,t,i,s){e.rotate(-s),e.translate(-e.canvas.width/2,-e.canvas.height/2),e.translate(+(-t+e.canvas.width/2),+(-i+e.canvas.height/2))}static render(e,t){h.beginRotationOffset(e,t.x,t.y,t.angle),t.dead?"enemy"===t.type?l.deadEnemy(e):l.deadPlayer(e):"enemy"===t.type?l.enemy(e,t.position):l.player(e,t.position),h.endRotationOffset(e,t.x,t.y,t.angle),l.health(e,t.health,t.x,t.y)}static playerToEntity(e,t,i){let s=t.player.x-e.x,a=t.player.y-e.y;t.player.dead?(s=e.lastVectorX,a=e.lastVectorY):(e.lastVectorX=s,e.lastVectorY=a);let n=Math.sqrt(s*s+a*a);if("pickup"===e.type&&i&&n<=95&&i(),n>0&&"enemy"===e.type&&(s/=n,a/=n,n<800)){e.angle=Math.atan2(a,s)-90*Math.PI/180,e.x+=s*e.speed,e.y+=a*e.speed;const i=r.vector(e.x,e.y,t.walls);e.x+=i.x*e.speed,e.y+=i.y*e.speed,e.incrementer+=e.speed,e.position=Math.sin(e.incrementer*Math.PI/180),n<100&&"enemy"===e.type&&t.player.takeDamage(e)}}}class c{constructor(e,t,i){this.vectorX=Math.cos(t.angle+90*Math.PI/180+5*i*Math.PI/180),this.vectorY=Math.sin(t.angle+90*Math.PI/180+5*i*Math.PI/180),this.x=t.x+this.vectorX*s*1.5,this.y=t.y+this.vectorY*s*1.5,this.radius=5,this.bounds={x:this.x-this.radius,y:this.y-this.radius,width:2*this.radius,height:2*this.radius},this.context=e,this.frames=0,this.markToDelete=!1}update(e,t=25){this.x+=this.vectorX*t,this.y+=this.vectorY*t,this.bounds.x=this.x-this.radius,this.bounds.y=this.y-this.radius,this.frames++,this.frames>15&&(this.markToDelete=!0);for(let t=0;t<e.length;t++){const i=e[t];h.intersection(i.bounds,this.bounds)&&(this.markToDelete=!0)}}render(e){Array.isArray(e)&&(e=e[Math.floor(Math.random()*e.length)]),this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fillStyle=e,this.context.fill()}}class W{constructor(){this.weapon=null,this.trigger=!0,this.frames=0,this.bullets=[],this.indexesToDelete=[]}update(i){this.weapon=e[i.selectedWeaponIndex],this.setEquippedWeaponDisplayInformation(),this.weapon&&this.trigger&&!i.player.dead?(document.querySelector("#out-of-ammo").style.display="none",["Pistol","Shotgun"].includes(this.weapon.name)&&t.stop(),i.mouse.pressed?this.handleFire(i.context,i.player):t.stop()):(this.frames++,this.frames>=60&&(this.frames=0,this.trigger=!0)),this.cleanupBullets(i.walls)}render(){for(let e=0;e<this.bullets.length;e++)this.bullets[e].render(this.weapon.projectile.color)}handleFire(e,i){--this.weapon.clip.current,this.shouldReloadWeaponAmmoClip()||(t.weapon({equippedWeapon:this.weapon},"fire",1.5),this.registerBullets(e,i),this.trigger=this.weapon.trigger)}setEquippedWeaponDisplayInformation(){const{name:e,clip:t,magazines:i}=this.weapon;document.querySelector("#equipped-weapon").innerHTML=e,document.querySelector("#ammo-remaining").innerHTML=t.current,document.querySelector("#ammo-capacity").innerHTML=t.capacity,document.querySelector("#magazines-remaining").innerHTML=i.current,document.querySelector("#magazines-total").innerHTML=i.capacity}shouldReloadWeaponAmmoClip(){if(this.weapon.clip.current<=0){if(!(this.weapon.magazines.current>0))return this.weapon.clip.current=0,document.querySelector("#out-of-ammo").style.display="inline",!0;--this.weapon.magazines.current,this.refillWeaponAmmoClip()}return!1}refillWeaponAmmoClip(){this.weapon.clip.current=this.weapon.clip.capacity}registerBullets(e,t){const{spread:i}=this.weapon.projectile;for(let s=i.min;s<=i.max;s++){const i=new c(e,t,s);this.bullets.push(i)}}cleanupBullets(e){this.indexesToDelete=[];for(let t=0;t<this.bullets.length;t++)this.bullets[t].update(e,this.weapon.projectile.dropoff),this.bullets[t].markToDelete&&this.indexesToDelete.push(t);for(let e=0;e<this.indexesToDelete.length;e++)this.bullets.splice(this.indexesToDelete[e],1)}}class d{constructor(e){this.type="player",this.bounding="arc",this.x=e.x*a,this.y=e.y*a,this.angle=0,this.position=0,this.incrementer=0,this.speed=5,this.sleep=!0,this.invincible=!1,this.health=100,this.damage={x:0,y:0},this.dead=!1}takeDamage(e){if(!this.invincible){const t=this.x-e.x,i=this.y-e.y,s=Math.sqrt(t*t+i*i);s>0&&(this.damage.x=t/s*20,this.damage.y=i/s*20,this.invincible=!0,this.health-=25,this.health=this.health<0?0:this.health,0==this.health&&(this.dead=!0))}}refillHealth(e){if(this.health<100){const t=this.health+e;t<=100&&(this.health=t)}}update(e){if(this.sleep||this.dead)return;let t=0;t+=e.keyboard.up?1:0,t+=e.keyboard.down?1:0,t+=e.keyboard.left?1:0,t+=e.keyboard.right?1:0;let i=this.speed;t>1&&(i/=Math.sqrt(2)),Math.abs(this.damage.x)!=0<Math.abs(this.damage.y)!=0?(this.damage.x*=.9,this.damage.y*=.9,this.x+=this.damage.x,this.y+=this.damage.y,Math.abs(this.damage.x)<.5&&Math.abs(this.damage.y)<.5&&(this.damage={x:0,y:0},this.invincible=!1)):(e.keyboard.up&&(this.y-=i),e.keyboard.down&&(this.y+=i),e.keyboard.left&&(this.x-=i),e.keyboard.right&&(this.x+=i));const s=r.vector(this.x,this.y,e.walls);this.x+=s.x*i,this.y+=s.y*i;let a=e.camera.offsetX+e.context.canvas.width/2-e.mouse.x,n=e.camera.offsetY+e.context.canvas.height/2-e.mouse.y;const o=Math.sqrt(a*a+n*n);o>0&&(a/=o,n/=o,this.angle=Math.atan2(n,a)+90*Math.PI/180),(e.keyboard.up||e.keyboard.down||e.keyboard.left||e.keyboard.right)&&(this.incrementer+=this.speed),this.position=Math.sin(this.incrementer*Math.PI/180)}render(e){this.sleep||h.render(e,this)}}class p{constructor(e){this.type="enemy",this.bounding="arc",this.x=e.x*a,this.y=e.y*a,this.angle=0,this.position=0,this.incrementer=0,this.speed=3,this.sleep=!0,this.pushAlongVelocity={x:0,y:0},this.pushBulletVelocity={x:0,y:0},this.canBePushedByBullet=!0,this.lastVectorX=0,this.lastVectorY=0,this.health=100,this.dead=!1,this.allEnemiesDead=!1}pushAlong(e,t){this.pushAlongVelocity.x=10*e,this.pushAlongVelocity.y=10*t}pushByBullet(e,t,i){this.canBePushedByBullet&&(this.pushBulletVelocity.x=15*e.vectorX,this.pushBulletVelocity.y=15*e.vectorY,this.canBePushedByBullet=!1,this.health-=t,this.health=this.health<0?0:this.health,0==this.health&&(this.dead=!0,document.querySelector("body").style.background="radial-gradient(white 5%, green 30%, black 100%)",setTimeout((()=>{document.querySelector("body").style.background="black"}),50),1===i.length&&(i.length=0,this.allEnemiesDead=!0)))}update(e){if(this.sleep||this.dead)return;if(h.playerToEntity(this,e),Math.random()<=.1)for(let t=0;t<e.enemies.length;t++){const i=e.enemies[t];if(i!=this){let e=i.x-this.x,t=i.y-this.y,s=Math.sqrt(e*e+t*t);0!=s&&s<100&&(e/=s,t/=s,i.pushAlong(e,t))}i.dead&&e.enemies.splice(t,1)}this.pushAlongVelocity.x*=.9,this.pushAlongVelocity.y*=.9,this.x+=this.pushAlongVelocity.x,this.y+=this.pushAlongVelocity.y;const t={x:this.x-s,y:this.y-s,width:120,height:120};for(let i=0;i<e.ballistics.bullets.length;i++){const s=e.ballistics.bullets[i];h.intersection(t,s.bounds)&&(s.markToDelete=!0,this.pushByBullet(s,e.ballistics.weapon.projectile.dps,e.enemies))}this.pushBulletVelocity.x*=.9,this.pushBulletVelocity.y*=.9,this.x+=this.pushBulletVelocity.x,this.y+=this.pushBulletVelocity.y,Math.abs(this.pushBulletVelocity.x)<.5&&Math.abs(this.pushBulletVelocity.y)<.5&&(this.canBePushedByBullet=!0,this.pushBulletVelocity.x=0,this.pushBulletVelocity.y=0)}render(e){this.sleep||h.render(e,this)}}class u{constructor(e,t,i=!1){this.type="wall",this.bounding="box",this.x=e*a,this.y=t*a,this.sleep=!0,this.textured=i,this.image=null,this.textured&&(this.textured=!0,this.image=new Image,this.image.src="img/wall.png",this.image.width=a,this.image.height=a),this.bounds={x:this.x,y:this.y,width:a,height:a}}render(e){this.sleep||(e.shadowColor="#2b2b2b",e.shadowBlur=5,e.shadowOffsetX=10,e.shadowOffsetY=10,this.textured?this.image.complete?e.drawImage(this.image,this.x,this.y,a,a):this.image.onload=()=>e.drawImage(this.image,this.x,this.y,a,a):(e.beginPath(),e.rect(this.x,this.y,a,a),e.fillStyle="#444444",e.fill()))}}class y{constructor(e,t){this.type="pickup",this.item="ammo",this.bounding="arc",this.x=e*a,this.y=t*a,this.sleep=!0,this.image=new Image,this.image.src="img/magazine.png",this.image.width=50,this.glow=40,this.bounds={x:this.x,y:this.y,width:a,height:a},this.markToDelete=!1}update(e){h.playerToEntity(this,e,(()=>{this.pickup()}))}render(e){this.sleep||(e.shadowBlur=this.glow,e.shadowColor="yellow",this.image.complete?e.drawImage(this.image,this.x,this.y,75,75):this.image.onload=()=>e.drawImage(this.image,this.x,this.y,75,75))}pickup(){this.markToDelete=!0}}class m{constructor(e,t){this.type="pickup",this.item="health",this.value=25,this.bounding="arc",this.x=e*a,this.y=t*a,this.sleep=!0,this.image=new Image,this.image.src="img/first-aid-box.png",this.image.width=50,this.glow=40,this.bounds={x:this.x,y:this.y,width:a,height:a},this.markToDelete=!1}update(e){h.playerToEntity(this,e,(()=>{this.pickup()}))}render(e){this.sleep||(e.shadowBlur=this.glow,e.shadowColor="#6c95c2",this.image.complete?e.drawImage(this.image,this.x,this.y,75,75):this.image.onload=()=>e.drawImage(this.image,this.x,this.y,75,75))}pickup(){this.markToDelete=!0}}const f=[["W W W W W W W W W W W W W W W ","W                           W","W                           W","W   P   W     A             W","W                           W","W         H         A       W","W                           W","W         E       A         W","W                           W","W W W W W W W W W W W W W W W "],["W W W W W W W W W W W W W W W W W W W W","W       W                             W","W   A   W                       H     W","W   E   W                             W","W       W           E     W W W W W W W","W     W W                             W","W                   E                 W","W         E                     E     W","W                                     W","W W W W W W W W W W W W W W           W","W                         W           W","W   H A E                 W           W","W                   E     W           W","W W W W W W W             W           W","W                         W     E     W","W               W W W W W W           W","W   P                     W           W","W                                     W","W         W W W                   E   W","W           W       E                 W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W          W                          W","W          W        E           E     W","W     P    W  E                       W","W          W                  W W W W W","W               W         W           W","W               W   E                 W","W           E   W               E     W","W               W                     W","W W W W     W W W W W W W W     W     W","W                         W           W","W     E     E             W     E     W","W                   E     W           W","W W W W W W W             W           W","W       W                 W           W","W   A   W   E         W W W W     W W W","W   E   W                 W           W","W                                 A   W","W     H   W W W                   E   W","W           W       E                 W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W                 W                   W","W   A E     E     W     E    E    A   W","W                 W       E           W","W                                     W","W W W W W W           W   H     W     W","W         W     W                     W","W   E     W     W     E               W","W               W                     W","W W W W         W W W W W W           W","W   E        E  W         W     E     W","W                     E   W           W","W       E                 W           W","W               W         W     W     W","W               W     E   W           W","W W W W W W W W W         W W W       W","W   E     E                           W","W                   E         P       W","W   A   E       W         W           W","W               W     E   W           W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W                 W           W       W","W A   W   E   E   W     E     W   E   W","W     W           W           W       W","W   H     E       W     E     W   E   W","W                 W                   W","W   E                                 W","W                   E   W     W       W","W         W W W W W           W       W","W   E             W           W   E   W","W            A    W           W       W","W   E             W     E     W     W W","W         W W W W W                   W","W   E                   W             W","W             W               W   H   W","W       W           W W W W W W       W","W W W W W   E E     W               E W","W                   W     A     W     W","W P         W       W     A     W   E W","W                   W           W     W","W W W W W W W W W W W W W W W W W W W W"]];class g{constructor(){this.levels=f,this.newMapConfiguration()}generate(e=1){const t=f[e];for(let e=0;e<t.length;e++){const i=t[e];for(let t=0;t<i.length;t+=2){const s=t/2;switch(i[t]){case"W":this.wallPositions.push({x:s,y:e});break;case"E":this.enemyPositions.push({x:s,y:e});break;case"A":this.ammoPickupPositions.push({x:s,y:e});break;case"H":this.healthPickupPositions.push({x:s,y:e});break;case"P":this.playerPosition={x:s,y:e}}}}}newMapConfiguration(){this.playerPosition={x:0,y:0},this.enemyPositions=[],this.wallPositions=[],this.ammoPickupPositions=[],this.healthPickupPositions=[]}getPlayerPosition(){return this.playerPosition}getEnemyPositions(){return this.enemyPositions}getWallPositions(){return this.wallPositions}getAmmoPickupPositions(){return this.ammoPickupPositions}getHealthPickupPositions(){return this.healthPickupPositions}}class x{constructor(e,t=0){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.context=e,this.frames=t}update(e,t){if(this.frames++,this.frames>=15){this.frames=0;const i={x:e.x-this.offsetX-this.context.canvas.width/2-this.size,y:e.y-this.offsetY-this.context.canvas.height/2-this.size,width:this.context.canvas.width+2*this.size,height:this.context.canvas.height+2*this.size};for(let e=0;e<t.length;e++){const n=t[e],o={};"arc"===n.bounding?(o.x=n.x-s,o.y=n.y-s,o.width=120,o.height=120):"box"===n.bounding&&(o.x=n.x,o.y=n.y,o.width=a,o.height=a),n.sleep=!h.intersection(o,i)}}}resize(){}preRender(e){const t=-e.x+this.context.canvas.width/2,i=-e.y+this.context.canvas.height/2,s=t-this.x,a=i-this.y;this.offsetX=this.x-t,this.offsetY=this.y-i,this.x+=s/10,this.y+=a/10,this.context.save(),this.context.translate(this.x,this.y)}postRender(){this.context.restore()}}var b=i(379),w=i.n(b),P=i(795),k=i.n(P),v=i(569),E=i.n(v),M=i(565),A=i.n(M),S=i(216),I=i.n(S),B=i(589),T=i.n(B),C=i(556),D={};D.styleTagTransform=T(),D.setAttributes=A(),D.insert=E().bind(null,"head"),D.domAPI=k(),D.insertStyleElement=I(),w()(C.Z,D),C.Z&&C.Z.locals&&C.Z.locals;const q=new class{constructor(e){this.frame=null,this.stopped=!1,this.context=e,this.camera=new x(this.context),this.keyboard=n,this.mouse=o,this.map=new g,this.currentLevel=1,this.newGameEntities(),this.gameover=!1,this.levelPassed=!1;const t=()=>this.onResize(window.innerWidth,window.innerHeight);window.addEventListener("resize",t),t(),this.createKeyboardMouseControls()}loop(){this.stopped||(this.frame=null,this.onUpdate(),this.onRender()),this.gameover&&(this.displayGameEnd(),this.restart()),this.run()}run(){this.frame||this.stopped||(this.frame=requestAnimationFrame(this.loop.bind(this)))}restart(){this.levelPassed?this.stop().then((async e=>await this.start(e,!0))):this.stop().then((async e=>await this.start(e,!1)))}async start(e,t=!1){if(e&&!this.frame){const e=document.querySelector(".game-ended-wrapper");t&&++this.currentLevel,setTimeout((()=>{e.style.display="none",this.setup({level:this.currentLevel},!0)}),2e3)}}async stop(){return this.stopped=!0,this.frame=null,cancelAnimationFrame(this.loop.bind(this)),this.stopped}setup({level:e=1},t=!1){this.frame=null,this.stopped=!1,this.gameover=!1,this.levelPassed=!1,this.newGameEntities(),this.generateMap(e).createPlayer().createEnemies().createWalls().createAmmoPickups().createHealthPickups(),document.querySelector("#current-level").innerHTML=this.currentLevel,t&&this.loop()}newGameEntities(){this.player=null,this.entities=[],this.walls=[],this.enemies=[],this.ammoPickups=[],this.healthPickups=[],this.selectedWeaponIndex=0,this.ballistics=new W}onUpdate(){this.camera.update(this.player,this.entities),this.ballistics.update(this);for(let e=0;e<this.entities.length;e++)this.canUpdateEntity(this.entities[e])&&this.entities[e].update(this),"player"===this.entities[e].type&&this.isPlayerDead(this.entities[e])&&(this.gameover=!0),"enemy"===this.entities[e].type&&this.areAllEnemiesDead(this.entities[e])&&(this.gameover=!0,this.levelPassed=!0),"pickup"===this.entities[e].type&&this.entities[e].markToDelete&&("ammo"===this.entities[e].item&&this.ballistics.refillWeaponAmmoClip(),"health"===this.entities[e].item&&this.player.refillHealth(this.entities[e].value),this.entities.splice(e,1));document.querySelector("#enemies-remaining").innerHTML=this.enemies.length}onRender(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.camera.preRender(this.player),this.ballistics.render();for(let e=0;e<this.entities.length;e++)this.entities[e].render(this.context);this.camera.postRender()}onResize(e,t){this.context.canvas.width=e,this.context.canvas.height=t,this.camera.resize()}generateMap(e=0){return this.map.newMapConfiguration(),this.map.generate(e),this}canUpdateEntity(e){return void 0!==e&&"function"==typeof e.update}createPlayer(){return this.player=new d(this.map.getPlayerPosition()),this.entities.push(this.player),this}createEnemies(){for(let e=0;e<this.map.getEnemyPositions().length;e++){const t=new p(this.map.getEnemyPositions()[e]);this.entities.push(t),this.enemies.push(t)}return this}createWalls(){for(let e=0;e<this.map.getWallPositions().length;e++){const t=this.map.getWallPositions()[e],i=new u(t.x,t.y,!0);this.entities.push(i),this.walls.push(i)}return this}createAmmoPickups(){for(let e=0;e<this.map.getAmmoPickupPositions().length;e++){const t=this.map.getAmmoPickupPositions()[e],i=new y(t.x,t.y);this.entities.push(i),this.ammoPickups.push(i)}return this}createHealthPickups(){for(let e=0;e<this.map.getHealthPickupPositions().length;e++){const t=this.map.getHealthPickupPositions()[e],i=new m(t.x,t.y);this.entities.push(i),this.healthPickups.push(i)}return this}isPlayerDead(e){return"player"===e.type&&e.dead}areAllEnemiesDead(e){return"enemy"===e.type&&e.allEnemiesDead}displayGameEnd(){const e=document.querySelector(".game-ended-wrapper");setTimeout((()=>{this.levelPassed?(e.querySelector("h1").innerHTML="You Win!",e.classList.add("level-passed"),e.classList.remove("level-failed")):(e.querySelector("h1").innerHTML="You Died!",e.classList.remove("level-passed"),e.classList.add("level-failed")),e.style.display="flex"}),500)}createKeyboardMouseControls(){document.addEventListener("keydown",(e=>{switch(e.key){case"w":this.keyboard.up=!0;break;case"s":this.keyboard.down=!0;break;case"a":this.keyboard.left=!0;break;case"d":this.keyboard.right=!0;break;case"1":this.selectedWeaponIndex=0;break;case"2":this.selectedWeaponIndex=1;break;case"3":this.selectedWeaponIndex=2;break;case"4":this.selectedWeaponIndex=3}})),document.addEventListener("keyup",(e=>{switch(e.key){case"w":this.keyboard.up=!1;break;case"s":this.keyboard.down=!1;break;case"a":this.keyboard.left=!1;break;case"d":this.keyboard.right=!1}})),document.addEventListener("mousemove",(e=>{this.mouse.x=e.clientX,this.mouse.y=e.clientY})),document.addEventListener("mousedown",(()=>{this.mouse.pressed=!0})),document.addEventListener("mouseup",(()=>{this.mouse.pressed=!1}))}}(document.querySelector("canvas#main").getContext("2d"));q.setup({level:1},!0),window.addEventListener("keydown",(function(e){const t=document.querySelector(`[data-key="${e.key}"]`);"w"!==e.key&&"a"!==e.key&&"s"!==e.key&&"d"!==e.key||t&&t.classList.add("keyboard-key__active")})),window.addEventListener("keyup",(e=>{const t=document.querySelector(`[data-key="${e.key}"]`);t&&t.classList.remove("keyboard-key__active")})),function(e,t=2e3){console.log("%c Logging game data to console","background: #222; color: yellow"),console.log(`%c Refreshes every ${(t%6e4/1e3).toFixed(2)} seconds`,"background: #222; color: yellow"),setInterval((()=>{const t=`W: ${e.walls.length} | E: ${e.enemies.length} | A: ${e.ammoPickups.length} | H: ${e.healthPickups.length}`;var i;console.log(`%c Player Health: ${e.player.health}`,"background: #222; color: #bfff00"),console.log(`%c Enemies Alive: ${e.enemies.length}`,"background: #222; color: #FF033E"),console.log(`%c Gameover State: ${e.gameover}`,"background: #222; color: #00ffff"),console.log("%c Entity Data:","background: #222; color: #ffffff"),console.log(`%c Total: ${e.entities.length} | Curr: ${i=e,i.walls.length+i.enemies.length+i.ammoPickups.length+i.healthPickups.length+1}`,"background: #222; color: #ffffff"),console.log(`%c ${t}\n\n`,"background: #222; color: #ffffff")}),t)}(q,3e3)})()})();