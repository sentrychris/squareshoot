(()=>{"use strict";var e={573:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(81),a=i.n(s),n=i(645),o=i.n(n)()(a());o.push([e.id,"html, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background: black;\n}\n\n.help {\n  position: absolute;\n  top: 30px;\n  left: 20px;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  font-size: 1.2rem;\n  color: white;\n  background: rgba(34, 34, 34, 0.75);\n  border: 1px solid rgb(34, 34, 34);\n  border-radius: 5px;\n  padding: 15px;\n}\n\n.help-section {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.help-section--img {\n  width: 40px;\n  margin-right: 20px;\n}\n\n.help-section--subtext {\n  font-size: 0.75rem;\n  color:#aaaaaa;\n}\n\n.help p {\n  margin-top: 0;\n  margin-bottom: 10px;\n}\n\n.help hr {\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\n#current-level {\n  color: #74f074;\n}\n\n#equipped-weapon {\n  color: #27a2f5;\n}\n\n#enemies-remaining {\n  color: #ff4040;\n}\n\n#out-of-ammo {\n  display: none;\n  color: #be3e3e;\n}\n\n.game-ended-wrapper {\n  display: none;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  text-align: center;\n}\n\n.game-ended {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n}\n\n.game-ended h1 {\n  margin-bottom: 0;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  font-size: 6rem;\n  color: white;\n  text-transform: uppercase;\n}\n\n.level-failed {\n  background: rgba(197, 13, 13, 0.8);\n}\n\n.level-passed {\n  background: rgba(13, 197, 38, 0.712);\n}\n\n.out-of-ammo {\n  border: none;\n  color: rgba(255, 255, 255, 0.5);\n  text-align: center;\n  text-shadow: 1px 5px 4px rgba(0, 0, 0, .3), 0 0 2px rgb(221, 145, 145), 0 0 10px;\n}\n\n.out-of-ammo span {\n  animation: blink .7s infinite alternate;\n}\n\n.out-of-ammo span.delay {\n  animation-duration: 6s;\n  animation-delay: 2s;\n  animation-direction: alternate cubic-bezier(0.5, 0.2, 0.3, 1.0)\n}\n\n@keyframes blink {\n  0% {}\n  50% {}\n  80% {\n    text-shadow: 0 0 2px rgba(255, 255, 255, .1), 0 0 10px rgba(255, 255, 255, .4);\n    text-stroke: 2px rgba(255, 255, 255, 0.05);\n  }\n}\n\n.keyboard {\n  width: 300px;\n  margin: 0 auto;\n}\n.keyboard .top-row {\n  width: 120px;\n  margin: 0 auto;\n}\n.keyboard .bottom-row {\n  display: inline-flex;\n}\n.keyboard-key {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #353943;\n  border: 1px solid #8fce00;\n  box-shadow: 3px 3px #d9ff82;\n  border-radius: 5px;\n  color: #ffffff;\n  width: 60px;\n  margin: 15px;\n  text-align: center;\n  top: 0;\n  left: 0;\n  transition: all 0.07s ease;\n}\n.keyboard-key__active {\n  background: #ffffff;\n  color: #000000;\n  box-shadow: 3px 3px #7e7e7d;\n}\n.keyboard-key > p {\n  margin-top: 5px;\n  margin-bottom: 10px;\n}\n\n.mt-0 {\n  margin-top: 0;\n}\n\n.mb-0 {\n  margin-bottom: 0;\n}",""]);const r=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,a,n){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(s)for(var r=0;r<this.length;r++){var h=this[r][0];null!=h&&(o[h]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);s&&o[c[0]]||(void 0!==n&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=n),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var n={},o=[],r=0;r<e.length;r++){var h=e[r],l=s.base?h[0]+s.base:h[0],c=n[l]||0,W="".concat(l," ").concat(c);n[l]=c+1;var p=i(W),d={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==p)t[p].references++,t[p].updater(d);else{var u=a(d,s);s.byIndex=r,t.splice(r,0,{identifier:W,updater:u,references:1})}o.push(W)}return o}function a(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,a){var n=s(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<n.length;o++){var r=i(n[o]);t[r].references--}for(var h=s(e,a),l=0;l<n.length;l++){var c=i(n[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}n=h}}},569:e=>{var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var a=void 0!==i.layer;a&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,a&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={id:s,exports:{}};return e[s](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0,(()=>{const e=60,t=150,s=!1,a=25,n=7.5,o={up:!1,down:!1,left:!1,right:!1},r={x:0,y:0,pressed:!1};class h{static intersection(e,t){return!(e.x+e.width<t.x||e.y+e.height<t.y||e.x>t.x+t.width||e.y>t.y+t.height)}static distance(e,t,i=!0){if(i)return Math.sqrt(e*e+t*t);const s=e.x-t.x,a=e.y-t.y;return Math.sqrt(s*s+a*a)}static arcWallVector({arcX:e,arcY:t,radius:i,wallX:s,wallY:a,size:n}){const o=Math.abs(e-s-n/2),r=Math.abs(t-a-n/2);if(o>n/2+i)return!1;if(r>n/2+i)return!1;if(o<=n/2)return!0;if(r<=n/2)return!0;const h=o-n/2,l=r-n/2;return h*h+l*l<=i*i}static entityToWalls(e,i){const s={x:0,y:0};for(let a=0;a<i.length;a++){const n=i[a];if(h.arcWallVector({arcX:e.x,arcY:e.y,radius:60,wallX:n.x,wallY:n.y,size:t})){const i=n.x+t/2,a=n.y+t/2;let o=e.x-i,r=e.y-a;const l=h.distance(o,r);l>0&&(o/=l,r/=l,s.x+=o,s.y+=r)}}return s}static entityToPlayer(e,t,i){let s=t.player.x-e.x,a=t.player.y-e.y;t.player.dead?(s=e.lastVectorX,a=e.lastVectorY):(e.lastVectorX=s,e.lastVectorY=a);const n=h.distance(s,a);if("pickup"===e.type&&i&&n<=95&&i(),n>0&&"enemy"===e.type&&(s/=n,a/=n,n<800)){e.angle=Math.atan2(a,s)-90*Math.PI/180,e.x+=s*e.speed,e.y+=a*e.speed;const i=h.entityToWalls(e,t.walls);e.x+=i.x*e.speed,e.y+=i.y*e.speed,e.incrementer+=e.speed,e.position=Math.sin(e.incrementer*Math.PI/180),n<100&&"enemy"===e.type&&t.player.takeDamage(e)}}}class l{static render(e,i){if(!e.sleep)if("pickup"===e.type){i.shadowBlur=e.glow,i.shadowColor=e.color;const s=t/2;e.image.complete?i.drawImage(e.image,e.x,e.y,s,s):e.image.onload=()=>i.drawImage(e.image,e.x,e.y,s,s)}else l.beginRotationOffset(i,e.x,e.y,e.angle),e.dead?"enemy"===e.type?l.deadEnemy(i):l.deadPlayer(i):"enemy"===e.type?l.enemy(i,e.position):l.player(i,e.position),l.endRotationOffset(i,e.x,e.y,e.angle),l.health(i,e.health,e.x,e.y)}static beginRotationOffset(e,t,i,s){e.translate(-(-t+e.canvas.width/2),-(-i+e.canvas.height/2)),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(s)}static endRotationOffset(e,t,i,s){e.rotate(-s),e.translate(-e.canvas.width/2,-e.canvas.height/2),e.translate(+(-t+e.canvas.width/2),+(-i+e.canvas.height/2))}static player(e,t){e.shadowBlur=5,e.shadowColor="white",e.beginPath(),e.rect(20,35*t-20,25,40),e.fillStyle="#D95B43",e.fill(),e.beginPath(),e.rect(-40,-35*t-20,25,40),e.fillStyle="#D95B43",e.fill(),e.rotate(30*Math.PI/180),e.beginPath(),e.rect(40,-10,20,80),e.fillStyle="#C02942",e.fill(),e.rotate(-30*Math.PI/180),e.rotate(-50*Math.PI/180),e.beginPath(),e.rect(-55,-20,20,45),e.fillStyle="#C02942",e.fill(),e.rotate(50*Math.PI/180),e.beginPath(),e.rect(-60,-30,120,60),e.fillStyle="#53777A",e.fill(),e.beginPath(),e.rect(-12.5,30,25,70),e.fillStyle="gray",e.fill(),e.beginPath(),e.arc(0,0,40,0,2*Math.PI),e.fillStyle="#F1D4AF",e.fill(),e.rotate(-180*Math.PI/180),e.beginPath(),e.arc(0,0,50,0,180*Math.PI/180),e.fillStyle="#454B1B",e.fill(),e.rotate(180*Math.PI/180)}static deadPlayer(e){e.beginPath(),e.rect(30,20,25,40),e.fillStyle="#D95B43",e.fill(),e.beginPath(),e.rect(-25,-65,25,40),e.fillStyle="#D95B43",e.fill(),e.rotate(25*Math.PI/180),e.beginPath(),e.rect(40,-5,20,80),e.fillStyle="#C02942",e.fill(),e.rotate(-25*Math.PI/180),e.rotate(-60*Math.PI/180),e.beginPath(),e.rect(-40,20,20,45),e.fillStyle="#C02942",e.fill(),e.rotate(60*Math.PI/180),e.beginPath(),e.rect(-60,-30,120,60),e.fillStyle="#53777A",e.fill(),e.beginPath(),e.arc(20,10,35,0,2*Math.PI),e.fillStyle="#F1D4AF",e.fill(),e.rotate(-170*Math.PI/180),e.beginPath(),e.arc(0,0,32,0,180*Math.PI/180),e.fillStyle="#4d2600",e.fill(),e.rotate(170*Math.PI/180)}static enemy(e,t){e.shadowBlur=10,e.shadowColor="#8fce00",e.beginPath(),e.rect(20,35*t-20,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(-40,-35*t-20,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(-50,-10,20,90),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(30,-10,20,85),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(-60,-30,120,60),e.fillStyle="#0B486B",e.fill(),e.beginPath(),e.arc(0,0,40,0,2*Math.PI),e.fillStyle="#CFF09E",e.fill(),e.rotate(-180*Math.PI/180),e.beginPath(),e.arc(0,0,37,0,180*Math.PI/180),e.fillStyle="#880808",e.fill(),e.rotate(180*Math.PI/180)}static deadEnemy(e){e.beginPath(),e.rect(52,-30,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(26,-40,25,40),e.fillStyle="#79BD9A",e.fill(),e.beginPath(),e.rect(-25,35,20,90),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(35,-40,20,85),e.fillStyle="#3B8686",e.fill(),e.beginPath(),e.rect(-42,-20,120,60),e.fillStyle="#0B486B",e.fill(),e.beginPath(),e.arc(10,5,35,0,2*Math.PI),e.fillStyle="#CFF09E",e.fill(),e.rotate(-170*Math.PI/180),e.beginPath(),e.arc(0,0,25,0,180*Math.PI/180),e.fillStyle="#4d2600",e.fill(),e.rotate(170*Math.PI/180)}static health(e,t,i,s){let a;e.beginPath(),e.rect(i-50,s+60,100,5),e.strokeStyle="black",e.stroke(),a=t<=35?"red":t<=75?"orange":"lime",e.beginPath(),e.rect(i-50,s+60,t,5),e.fillStyle=a,e.fill()}}const c=[{name:"Pistol",type:"gun",projectile:{color:"#F8CA00",delay:null,spread:{min:0,max:0},dps:30,dropoff:40},clip:{current:10,capacity:10},magazines:{current:2,capacity:2},trigger:!1,audio:{type:"single",fire:"./fx/audio/pistol/pistol-fire.mp3",reload:"./fx/audio/pistol/pistol-reload.mp3"}},{name:"Shotgun",type:"gun",projectile:{color:"#F8CA00",delay:null,spread:{min:-3,max:3},dps:50,dropoff:25},clip:{current:6,capacity:6},magazines:{current:2,capacity:2},trigger:!1,audio:{type:"single",fire:"./fx/audio/shotgun/shotgun-fire.mp3",reload:"./fx/audio/shotgun/shotgun-reload.mp3"}},{name:"Machine Gun",type:"gun",projectile:{color:["#CC5500","#F8CA00"],delay:null,spread:{min:0,max:0},dps:15,dropoff:40},clip:{current:225,capacity:225},magazines:{current:2,capacity:2},trigger:!0,audio:{type:"repeat",fire:"./fx/audio/machine-gun/machine-gun-fire.mp3",reload:"./fx/audio/machine-gun/machine-gun-reload.mp3"}},{name:"Flamethrower",type:"gun",projectile:{color:["#CC5500","#F8CA00"],delay:null,spread:{min:-5,max:5},dps:10,dropoff:20},clip:{current:600,capacity:600},magazines:{current:2,capacity:2},trigger:!0,audio:{type:"repeat",fire:"./fx/audio/flamethrower/flamethrower-fire.mp3",reload:"./fx/audio/flamethrower/flamethrower-reload.mp3"}},{name:"Grenade",type:"throwable",projectile:{color:["#CC5500","#F8CA00"],delay:2,spread:{min:-8,max:8},dps:75,dropoff:[20,40]},clip:{current:2,capacity:2},magazines:{current:1,capacity:1},trigger:!1,audio:{type:"single",fire:"./fx/audio/flamethrower/flamethrower-fire.mp3",reload:"./fx/audio/flamethrower/flamethrower-reload.mp3"}}],W=[{name:"lilbitch",types:["passed","kill"],enabled:!1,playback:"./fx/audio/snippets/lilbitch.mp3"},{name:"bloodyshoes",types:["passed","kill"],enabled:!1,playback:"./fx/audio/snippets/bloodyshoes.mp3"},{name:"nofucks",types:["passed","kill"],enabled:!1,playback:"./fx/audio/snippets/nofucks.mp3"},{name:"eoww",types:["hurt","kill"],enabled:!0,playback:"./fx/audio/snippets/eoww.mp3"},{name:"generic-pickup",types:["pickup"],enabled:!1,playback:"./fx/audio/snippets/pickup.mp3"},{name:"reload",types:["pickup"],enabled:!0,playback:"./fx/audio/snippets/reload.mp3"},{name:"inject",types:["pickup"],enabled:!0,playback:"./fx/audio/snippets/syringe2.mp3"}],p=["./soundtrack/track5.mp3"],d=new class{constructor(e=!0){this.audio={weapons:{},snippets:{}},this.soundtracks=[],this.loaded=!1,e&&this.load(["weapons","snippets","soundtrack"]),this.trackIndex=0,this.currentTrack=this.soundtracks[this.trackIndex],this.nextTrackReady=!1,this.trackListener=!1,this.fx={weapon:null,snippet:null}}load(e=[]){if(e.includes("weapons"))for(const e of c)this.audio.weapons[e.name]={fire:new Audio(e.audio.fire),reload:new Audio(e.audio.reload)};if(e.includes("snippets"))for(const e of W)e.enabled&&(this.audio.snippets[e.name]={types:e.types,playback:new Audio(e.playback)});if(e.includes("soundtrack"))for(const e of p)this.soundtracks.push({name:e.split("/").pop(),playback:new Audio(e)});this.loaded=!0}stop(e){const t=this.fx[e];t&&!t.paused&&(t.pause(),t.currentTime=0)}weapon({weaponIndex:e=null,equippedWeapon:t=null},i="fire",s=1){if(!this.loaded)return;const a=e?c[e]:t;a&&(this.fx.weapon="fire"===i?this.audio.weapons[a.name].fire:this.audio.weapons[a.name].reload,this.fx.weapon&&(this.fx.weapon.volume=.3,"repeat"!==a.audio.type&&this.stop("weapon"),this.fx.weapon.playbackRate=s,this.fx.weapon.play()))}snippet({name:e=null,random:t=!1}){if(!this.loaded)return;this.stop("snippet");const i=t?W[Math.floor(Math.random()*W.length)]:this.audio.snippets[e];i&&(this.fx.snippet=t?this.audio.snippets[i.name].playback:i.playback,this.fx.snippet.play())}soundtrack(){this.loaded&&(this.currentTrack&&this.currentTrack.playback&&(this.currentTrack.playback.paused||0===this.currentTrack.playback.currentTime)?(console.log(`now playing ${this.currentTrack.name}`),this.currentTrack.playback.volume=.2,this.currentTrack.playback.play()):this.nextTrackReady&&(this.currentTrack.playback.pause(),this.currentTrack.playback.currentTime=0,++this.trackIndex,this.trackIndex>=this.soundtracks.length&&(this.trackIndex=0),console.log(`changed track index to ${this.trackIndex}`),this.trackListener=!1,this.currentTrack=this.soundtracks[this.trackIndex]),this.currentTrack&&!this.trackListener&&(this.nextTrackReady=!1,this.currentTrack.playback.addEventListener("ended",(()=>{this.nextTrackReady=!0,this.trackListener=!0}))))}};class u{constructor(e){this.type="player",this.bounding="arc",this.x=e.x*t,this.y=e.y*t,this.angle=0,this.position=0,this.incrementer=0,this.speed=5,this.stamina=!1,this.staminaAmount=0,this.sleep=!0,this.invincible=!1,this.health=100,this.damage={x:0,y:0},this.dead=!1}render(e){l.render(this,e)}update(e){if(this.sleep||this.dead)return;let t=0;t+=e.keyboard.up?1:0,t+=e.keyboard.down?1:0,t+=e.keyboard.left?1:0,t+=e.keyboard.right?1:0;let i=this.speed;t>1&&(i/=Math.sqrt(2)),Math.abs(this.damage.x)!=0<Math.abs(this.damage.y)!=0?(this.damage.x*=.9,this.damage.y*=.9,this.x+=this.damage.x,this.y+=this.damage.y,Math.abs(this.damage.x)<.5&&Math.abs(this.damage.y)<.5&&(this.damage={x:0,y:0},this.invincible=!1)):(e.keyboard.up&&(this.y-=i),e.keyboard.down&&(this.y+=i),e.keyboard.left&&(this.x-=i),e.keyboard.right&&(this.x+=i));const s=h.entityToWalls(this,e.walls);this.x+=s.x*i,this.y+=s.y*i;let a=e.camera.offsetX+e.context.canvas.width/2-e.mouse.x,n=e.camera.offsetY+e.context.canvas.height/2-e.mouse.y;const o=h.distance(a,n);o>0&&(a/=o,n/=o,this.angle=Math.atan2(n,a)+90*Math.PI/180),(e.keyboard.up||e.keyboard.down||e.keyboard.left||e.keyboard.right)&&(this.incrementer+=this.speed),this.position=Math.sin(this.incrementer*Math.PI/180)}takeDamage(e){if(!this.invincible){const t=this.x-e.x,i=this.y-e.y,s=h.distance(t,i);s>0&&(this.damage.x=t/s*20,this.damage.y=i/s*20,this.invincible=!0,this.health-=25,this.health=this.health<0?0:this.health,0==this.health&&(d.snippet({name:"eoww"}),this.dead=!0))}}boostSpeed(e){this.speed=e,setTimeout((()=>{this.speed=5}),3e3)}refillHealth(e){if(this.health<100){const t=this.health+e;t<=100&&(this.health=t)}}}class y{constructor(e){this.type="enemy",this.bounding="arc",this.x=e.x*t,this.y=e.y*t,this.angle=0,this.position=0,this.incrementer=0,this.speed=3,this.sleep=!0,this.pushAlongVelocity={x:0,y:0},this.pushProjectileVelocity={x:0,y:0},this.canBePushedByProjectile=!0,this.lastVectorX=0,this.lastVectorY=0,this.health=100,this.dead=!1,this.allEnemiesDead=!1}render(e){l.render(this,e)}update(t){if(this.sleep||this.dead)return;if(h.entityToPlayer(this,t),Math.random()<=.1)for(let e=0;e<t.enemies.length;e++){const i=t.enemies[e];if(i!=this){let e=i.x-this.x,t=i.y-this.y;const s=h.distance(e,t);0!=s&&s<100&&(e/=s,t/=s,i.pushAlong(e,t))}i.dead&&t.enemies.splice(e,1)}this.pushAlongVelocity.x*=.9,this.pushAlongVelocity.y*=.9,this.x+=this.pushAlongVelocity.x,this.y+=this.pushAlongVelocity.y;const i={x:this.x-e,y:this.y-e,width:2*e,height:2*e};for(let e=0;e<t.ballistics.projectiles.length;e++){const s=t.ballistics.projectiles[e];h.intersection(i,s.bounds)&&(s.markToDelete=!0,this.pushByProjectile(s,t.ballistics.weapon.projectile.dps,t.enemies))}this.pushProjectileVelocity.x*=.9,this.pushProjectileVelocity.y*=.9,this.x+=this.pushProjectileVelocity.x,this.y+=this.pushProjectileVelocity.y,Math.abs(this.pushProjectileVelocity.x)<.5&&Math.abs(this.pushProjectileVelocity.y)<.5&&(this.canBePushedByProjectile=!0,this.pushProjectileVelocity.x=0,this.pushProjectileVelocity.y=0)}pushAlong(e,t){this.pushAlongVelocity.x=10*e,this.pushAlongVelocity.y=10*t}pushByProjectile(e,t,i){this.canBePushedByProjectile&&(this.pushProjectileVelocity.x=15*e.vectorX,this.pushProjectileVelocity.y=15*e.vectorY,this.canBePushedByProjectile=!1,this.health-=t,this.health=this.health<0?0:this.health,0==this.health&&(this.dead=!0,document.querySelector("body").style.background="radial-gradient(white 5%, green 30%, black 100%)",setTimeout((()=>{document.querySelector("body").style.background="black"}),50),1===i.length&&(i.length=0,this.allEnemiesDead=!0)))}}class m{constructor(e,i,s=!1){this.type="wall",this.bounding="box",this.x=e*t,this.y=i*t,this.sleep=!0,this.textured=s,this.image=null,this.textured&&(this.textured=!0,this.image=new Image,this.image.src="img/wall.png",this.image.width=t,this.image.height=t),this.bounds={x:this.x,y:this.y,width:t,height:t}}render(e){this.sleep||(e.shadowColor="#2b2b2b",e.shadowBlur=5,e.shadowOffsetX=10,e.shadowOffsetY=10,this.textured?this.image.complete?e.drawImage(this.image,this.x,this.y,t,t):this.image.onload=()=>e.drawImage(this.image,this.x,this.y,t,t):(e.beginPath(),e.rect(this.x,this.y,t,t),e.fillStyle="#444444",e.fill()))}}class f{constructor(e,i){this.type="pickup",this.item="ammo",this.value=s,this.bounding="arc",this.x=e*t,this.y=i*t,this.bounds={x:this.x,y:this.y,width:t,height:t},this.sleep=!0,this.image=new Image,this.image.src="img/magazine.png",this.glow=40,this.color="#F8CA00",this.markToDelete=!1}render(e){l.render(this,e)}update(e){h.entityToPlayer(this,e,(()=>{this.pickup()}))}pickup(){d.snippet({name:"reload"}),this.markToDelete=!0}}class g{constructor(e,i){this.type="pickup",this.item="health",this.value=a,this.bounding="arc",this.x=e*t,this.y=i*t,this.bounds={x:this.x,y:this.y,width:t,height:t},this.sleep=!0,this.image=new Image,this.image.src="img/first-aid-box.png",this.glow=40,this.color="#6C95C2",this.markToDelete=!1}render(e){l.render(this,e)}update(e){h.entityToPlayer(this,e,(()=>{this.pickup()}))}pickup(){d.snippet({name:"inject"}),this.markToDelete=!0}}class x{constructor(e,i){this.type="pickup",this.item="stamina",this.value=n,this.bounding="arc",this.x=e*t,this.y=i*t,this.bounds={x:this.x,y:this.y,width:t,height:t},this.sleep=!0,this.image=new Image,this.image.src="img/stamina.png",this.glow=40,this.color="#F5F5F5",this.markToDelete=!1}render(e){l.render(this,e)}update(e){h.entityToPlayer(this,e,(()=>{this.pickup()}))}pickup(){d.snippet({name:"inject"}),this.markToDelete=!0}}class b{constructor(t,i,s){this.vectorX=Math.cos(i.angle+90*Math.PI/180+5*s*Math.PI/180),this.vectorY=Math.sin(i.angle+90*Math.PI/180+5*s*Math.PI/180),this.x=i.x+this.vectorX*e*1.5,this.y=i.y+this.vectorY*e*1.5,this.radius=5,this.bounds={x:this.x-this.radius,y:this.y-this.radius,width:2*this.radius,height:2*this.radius},this.context=t,this.frames=0,this.markToDelete=!1}update(e,t=25){this.x+=this.vectorX*t,this.y+=this.vectorY*t,this.bounds.x=this.x-this.radius,this.bounds.y=this.y-this.radius,this.frames++,this.frames>15&&(this.markToDelete=!0);for(let t=0;t<e.length;t++){const i=e[t];h.intersection(i.bounds,this.bounds)&&(this.markToDelete=!0)}}render(e){Array.isArray(e)&&(e=e[Math.floor(Math.random()*e.length)]),this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fillStyle=e,this.context.fill()}}class k{constructor(t,i,s){this.vectorX=Math.cos(i.angle+90*Math.PI/180+5*s*Math.PI/180),this.vectorY=Math.sin(i.angle+90*Math.PI/180+5*s*Math.PI/180),this.x=i.x+this.vectorX*e*1.5,this.y=i.y+this.vectorY*e*1.5,this.radius=5,this.bounds={x:this.x-this.radius,y:this.y-this.radius,width:2*this.radius,height:2*this.radius},this.context=t,this.frames=0,this.markToDelete=!1}update(e,t=25){this.x+=this.vectorX*t,this.y+=this.vectorY*t,this.bounds.x=this.x-this.radius,this.bounds.y=this.y-this.radius,this.frames++,this.frames>15&&(this.markToDelete=!0);for(let t=0;t<e.length;t++){const i=e[t];h.intersection(i.bounds,this.bounds)&&(this.markToDelete=!0)}}render(e){Array.isArray(e)&&(e=e[Math.floor(Math.random()*e.length)]),this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fillStyle=e,this.context.fill()}}class w{constructor(){this.weapon=null,this.trigger=!0,this.frames=0,this.projectiles=[],this.indexesToDelete=[]}update(e){this.weapon=c[e.selectedWeaponIndex],this.setEquippedWeaponDisplayInformation(),this.weapon&&this.trigger&&!e.player.dead?(document.querySelector("#out-of-ammo").style.display="none",e.mouse.pressed?this.handleFire(e.context,e.player):d.stop("weapon")):(this.frames++,this.frames>=60&&(this.frames=0,this.trigger=!0)),this.cleanupProjectiles(e.walls)}render(){for(let e=0;e<this.projectiles.length;e++)this.projectiles[e].render(this.weapon.projectile.color)}handleFire(e,t){this.shouldReloadWeaponAmmoClip()||(--this.weapon.clip.current,d.weapon({equippedWeapon:this.weapon},"fire",1.5),this.registerProjectiles(e,t),this.trigger=this.weapon.trigger)}setEquippedWeaponDisplayInformation(){const{name:e,clip:t,magazines:i}=this.weapon;document.querySelector("#equipped-weapon").innerHTML=e,document.querySelector("#ammo-remaining").innerHTML=t.current,document.querySelector("#ammo-capacity").innerHTML=t.capacity,document.querySelector("#magazines-remaining").innerHTML=i.current,document.querySelector("#magazines-total").innerHTML=i.capacity}shouldReloadWeaponAmmoClip(){if(this.weapon.clip.current<=0){if(!(this.weapon.magazines.current>0))return this.weapon.clip.current=0,document.querySelector("#out-of-ammo").style.display="inline",!0;--this.weapon.magazines.current,this.refillWeaponAmmoClip()}return!1}refillWeaponAmmoClip(){this.weapon.clip.current===this.weapon.clip.capacity?this.weapon.magazines.current<this.weapon.magazines.capacity&&++this.weapon.magazines.current:this.weapon.clip.current=this.weapon.clip.capacity}registerProjectiles(e,t){const{spread:i,delay:s}=this.weapon.projectile;for(let a=i.min;a<=i.max;a++){const i="throwable"===this.weapon.type&&s?new k(e,t,a):new b(e,t,a);this.projectiles.push(i)}}cleanupProjectiles(e){this.indexesToDelete=[];for(let t=0;t<this.projectiles.length;t++)this.projectiles[t].update(e,this.weapon.projectile.dropoff),this.projectiles[t].markToDelete&&this.indexesToDelete.push(t);for(let e=0;e<this.indexesToDelete.length;e++)this.projectiles.splice(this.indexesToDelete[e],1)}}class P{constructor(e,t=0){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.context=e,this.frames=t}update(i,s){if(this.frames++,this.frames>=15){this.frames=0;const a={x:i.x-this.offsetX-this.context.canvas.width/2-this.size,y:i.y-this.offsetY-this.context.canvas.height/2-this.size,width:this.context.canvas.width+2*this.size,height:this.context.canvas.height+2*this.size};for(let i=0;i<s.length;i++){const n=s[i],o={};"arc"===n.bounding?(o.x=n.x-e,o.y=n.y-e,o.width=2*e,o.height=2*e):"box"===n.bounding&&(o.x=n.x,o.y=n.y,o.width=t,o.height=t),n.sleep=!h.intersection(o,a)}}}resize(){}newScene(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)}preRender(e){const t=-e.x+this.context.canvas.width/2,i=-e.y+this.context.canvas.height/2,s=t-this.x,a=i-this.y;this.offsetX=this.x-t,this.offsetY=this.y-i,this.x+=s/10,this.y+=a/10,this.context.save(),this.context.translate(this.x,this.y)}postRender(){this.context.restore()}}const v=[["W W W W W W W W W W W W W W W W W W W W","W           W                         W","W           W   H   S                 W","W   P   W               H   A     E   W","W             A     W                 W","W W W W W     W W W W             E   W","W       W                 H           W","W   E   W   S     A   S       W   E   W","W       W                             W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W       W                             W","W   A   W   S     E             H     W","W   E   W                             W","W       W           E     W W W W W W W","W     W W                             W","W                   E                 W","W         E               S     E     W","W                                     W","W W W W W W W W W W W W W W           W","W                         W           W","W   H A E                 W           W","W                   E     W           W","W W W W W W W             W           W","W                         W     E     W","W               W W W W W W           W","W   P                     W           W","W                                     W","W         W W W                   E   W","W           W       E                 W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W          W                          W","W          W        E           E     W","W     P    W  E           S           W","W          W                  W W W W W","W               W         W           W","W               W   E                 W","W           E   W               E     W","W               W                     W","W W W W     W W W W W W W W     W     W","W                         W           W","W     E     E             W     E     W","W                   E     W           W","W W W W W W W             W           W","W       W         S       W           W","W   A   W   E         W W W W     W W W","W   E   W                 W           W","W                                 A   W","W     H   W W W             H     E   W","W           W       E                 W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W                 W                   W","W   A       E     W     E    E    A   W","W                 W                   W","W                                     W","W W W W W W           W   H     W     W","W         W     W                     W","W   E H   W     W     E               W","W               W            S        W","W W W W         W W W W W W           W","W            E  W         W     E     W","W   E                 E   W           W","W       E                 W           W","W   A        S  W         W     W     W","W               W     E   W           W","W W W W W W W W W         W W W       W","W                                     W","W   E     E         E         P       W","W   A   E       W         W           W","W               W     E   W           W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W","W                 W           W       W","W A   W   E   E   W     E     W   E   W","W     W           W           W       W","W   H     E       W     E     W   E   W","W                 W                   W","W   E       S                         W","W                   E   W     W       W","W         W W W W W           W       W","W   E             W     S     W   E   W","W            A    W           W       W","W   E             W     E     W     W W","W         W W W W W                   W","W   E                   W             W","W             W               W   H   W","W       W           W W W W W W       W","W W W W W   E E     W               E W","W                   W     A     W     W","W   P       W       W     A     W   E W","W                   W           W     W","W W W W W W W W W W W W W W W W W W W W"],["W W W W W W W W W W W W W W W W W W W W W W W W W","W                                               W","W     E       E             E     H             W","W                   W W W             E     E   W","W   E                             W       W     W","W     W W     E                                 W","W                   W W W             E     S   W","W     A   S   E     W             E             W","W                                   H     W     W","W       W     W W W               W       W     W","W   E   W         W   E   W   E   W   E   W     W","W       W     A   W       W       W             W","W W W W W     W W W W W W W W W W W       W W W W","W       W     W                   W             W","W   E   W     W   A         S     W       W     W","W       W             W W                 W     W","W             E       W W                       W","W     W     W     E             W     E     E   W","W           W                   W               W","W   E       W W W W W W W W W W W W W W     W W W","W                                 W             W","W   E       W W W W W       A     W   A         W","W                   W   E   A     W       P     W","W             H     W             W             W","W W W W W W W W W W W W W W W W W W W W W W W W W"]];class E{constructor(){this.levels=v,this.newMapConfiguration()}generate(e=1){const t=v[e];for(let e=0;e<t.length;e++){const i=t[e];for(let t=0;t<i.length;t+=2){const s=t/2;switch(i[t]){case"W":this.wallPositions.push({x:s,y:e});break;case"E":this.enemyPositions.push({x:s,y:e});break;case"A":this.ammoPickupPositions.push({x:s,y:e});break;case"H":this.healthPickupPositions.push({x:s,y:e});break;case"S":this.staminaPickupPositions.push({x:s,y:e});break;case"P":this.playerPosition={x:s,y:e}}}}}newMapConfiguration(){this.playerPosition={x:0,y:0},this.enemyPositions=[],this.wallPositions=[],this.ammoPickupPositions=[],this.healthPickupPositions=[],this.staminaPickupPositions=[]}getPlayerPosition(){return this.playerPosition}getEnemyPositions(){return this.enemyPositions}getWallPositions(){return this.wallPositions}getAmmoPickupPositions(){return this.ammoPickupPositions}getHealthPickupPositions(){return this.healthPickupPositions}getStaminaPickupPositions(){return this.staminaPickupPositions}}var M=i(379),S=i.n(M),A=i(795),T=i.n(A),I=i(569),j=i.n(I),C=i(565),D=i.n(C),L=i(216),H=i.n(L),B=i(589),q=i.n(B),z=i(573),F={};F.styleTagTransform=q(),F.setAttributes=D(),F.insert=j().bind(null,"head"),F.domAPI=T(),F.insertStyleElement=H(),S()(z.Z,F),z.Z&&z.Z.locals&&z.Z.locals;const V=new class{constructor(e){this.frame=null,this.stopped=!1,this.context=e,this.camera=new P(this.context),this.keyboard=o,this.mouse=r,this.map=new E,this.currentLevel=1,this.newGameEntities(),this.gameover=!1,this.levelPassed=!1;const t=()=>this.onResize(window.innerWidth,window.innerHeight);window.addEventListener("resize",t),t(),this.createKeyboardMouseControls()}loop(){d.soundtrack(),this.stopped||(this.frame=null,this.onUpdate(),this.onRender()),this.gameover&&(this.displayGameEnd(),this.restart()),this.run()}run(){this.frame||this.stopped||(this.frame=requestAnimationFrame(this.loop.bind(this)))}restart(){this.levelPassed?this.stop().then((async e=>await this.start(e,!0))):this.stop().then((async e=>await this.start(e,!1)))}async start(e,t=!1){if(e&&!this.frame){const e=document.querySelector(".game-ended-wrapper");t&&++this.currentLevel,setTimeout((()=>{e.style.display="none",this.setup({level:this.currentLevel},!0)}),2e3)}}async pause(){return this.stopped?(this.stopped=!1,this.frame=requestAnimationFrame(this.loop.bind(this))):(this.stopped=!0,cancelAnimationFrame(this.frame)),this.stopped}async stop(){return this.stopped=!0,this.frame=null,cancelAnimationFrame(this.loop.bind(this)),this.stopped}setup({level:e=1},t=!1){this.frame=null,this.stopped=!1,this.gameover=!1,this.currentLevel=e,this.levelPassed=!1,this.newGameEntities(),this.generateMap(e).createPlayer().createEnemies().createWalls().createAmmoPickups().createHealthPickups().createStaminaPickups(),document.querySelector("#current-level").innerHTML=this.currentLevel,t&&this.loop()}newGameEntities(){this.player=null,this.entities=[],this.walls=[],this.enemies=[],this.ammoPickups=[],this.healthPickups=[],this.staminaPickups=[],this.selectedWeaponIndex=0,this.ballistics=new w}onUpdate(){this.camera.update(this.player,this.entities),this.ballistics.update(this);for(let e=0;e<this.entities.length;e++)this.canUpdateEntity(this.entities[e])&&this.entities[e].update(this),"player"===this.entities[e].type&&this.isPlayerDead(this.entities[e])&&(this.gameover=!0),"enemy"===this.entities[e].type&&this.areAllEnemiesDead(this.entities[e])&&(this.gameover=!0,this.levelPassed=!0),"pickup"===this.entities[e].type&&this.entities[e].markToDelete&&("ammo"===this.entities[e].item&&this.ballistics.refillWeaponAmmoClip(),"health"===this.entities[e].item&&this.player.refillHealth(this.entities[e].value),"stamina"===this.entities[e].item&&this.player.boostSpeed(this.entities[e].value),this.entities.splice(e,1));document.querySelector("#enemies-remaining").innerHTML=this.enemies.length}onRender(){this.camera.newScene(),this.camera.preRender(this.player),this.ballistics.render();for(let e=0;e<this.entities.length;e++)this.entities[e].render(this.context);this.camera.postRender()}onResize(e,t){this.context.canvas.width=e,this.context.canvas.height=t,this.camera.resize()}generateMap(e=0){return this.map.newMapConfiguration(),this.map.generate(e),this}canUpdateEntity(e){return void 0!==e&&"function"==typeof e.update}createPlayer(){return this.player=new u(this.map.getPlayerPosition()),this.entities.push(this.player),this}createEnemies(){for(let e=0;e<this.map.getEnemyPositions().length;e++){const t=new y(this.map.getEnemyPositions()[e]);this.entities.push(t),this.enemies.push(t)}return this}createWalls(){for(let e=0;e<this.map.getWallPositions().length;e++){const t=this.map.getWallPositions()[e],i=new m(t.x,t.y,!0);this.entities.push(i),this.walls.push(i)}return this}createAmmoPickups(){for(let e=0;e<this.map.getAmmoPickupPositions().length;e++){const t=this.map.getAmmoPickupPositions()[e],i=new f(t.x,t.y);this.entities.push(i),this.ammoPickups.push(i)}return this}createHealthPickups(){for(let e=0;e<this.map.getHealthPickupPositions().length;e++){const t=this.map.getHealthPickupPositions()[e],i=new g(t.x,t.y);this.entities.push(i),this.healthPickups.push(i)}return this}createStaminaPickups(){for(let e=0;e<this.map.getStaminaPickupPositions().length;e++){const t=this.map.getStaminaPickupPositions()[e],i=new x(t.x,t.y);this.entities.push(i),this.staminaPickups.push(i)}return this}isPlayerDead(e){return"player"===e.type&&e.dead}areAllEnemiesDead(e){return"enemy"===e.type&&e.allEnemiesDead}displayGameEnd(){const e=document.querySelector(".game-ended-wrapper");setTimeout((()=>{this.levelPassed?(e.querySelector("h1").innerHTML="You Win!",e.classList.add("level-passed"),e.classList.remove("level-failed")):(e.querySelector("h1").innerHTML="You Died!",e.classList.remove("level-passed"),e.classList.add("level-failed")),e.style.display="flex"}),500)}createKeyboardMouseControls(){window.addEventListener("keydown",(async e=>{"p"===e.key&&await this.pause()})),document.addEventListener("keydown",(e=>{switch(e.key){case"w":this.keyboard.up=!0;break;case"s":this.keyboard.down=!0;break;case"a":this.keyboard.left=!0;break;case"d":this.keyboard.right=!0;break;case"1":this.selectedWeaponIndex=0;break;case"2":this.selectedWeaponIndex=1;break;case"3":this.selectedWeaponIndex=2;break;case"4":this.selectedWeaponIndex=3;break;case"5":this.selectedWeaponIndex=4}})),document.addEventListener("keyup",(e=>{switch(e.key){case"w":this.keyboard.up=!1;break;case"s":this.keyboard.down=!1;break;case"a":this.keyboard.left=!1;break;case"d":this.keyboard.right=!1}})),document.addEventListener("mousemove",(e=>{this.mouse.x=e.clientX,this.mouse.y=e.clientY})),document.addEventListener("mousedown",(()=>{this.mouse.pressed=!0})),document.addEventListener("mouseup",(()=>{this.mouse.pressed=!1}))}}(document.querySelector("canvas#main").getContext("2d"));V.setup({level:1},!0),window.addEventListener("keydown",(function(e){const t=document.querySelector(`[data-key="${e.key}"]`);"w"!==e.key&&"a"!==e.key&&"s"!==e.key&&"d"!==e.key||t&&t.classList.add("keyboard-key__active")})),window.addEventListener("keyup",(e=>{const t=document.querySelector(`[data-key="${e.key}"]`);t&&t.classList.remove("keyboard-key__active")})),function(e,t=2e3){console.log("%c Logging game data to console","background: #222; color: yellow"),console.log(`%c Refreshes every ${(t%6e4/1e3).toFixed(2)} seconds`,"background: #222; color: yellow"),setInterval((()=>{const t=`W: ${e.walls.length} | E: ${e.enemies.length} | A: ${e.ammoPickups.length} | H: ${e.healthPickups.length}`;var i;console.log(`%c Player Health: ${e.player.health}`,"background: #222; color: #bfff00"),console.log(`%c Enemies Alive: ${e.enemies.length}`,"background: #222; color: #FF033E"),console.log(`%c Gameover State: ${e.gameover}`,"background: #222; color: #00ffff"),console.log("%c Entity Data:","background: #222; color: #ffffff"),console.log(`%c Total: ${e.entities.length} | Curr: ${i=e,i.walls.length+i.enemies.length+i.ammoPickups.length+i.healthPickups.length+1}`,"background: #222; color: #ffffff"),console.log(`%c ${t}\n\n`,"background: #222; color: #ffffff")}),t)}(V,1e4)})()})();